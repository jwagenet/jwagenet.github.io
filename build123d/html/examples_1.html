

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The build123d Examples &mdash; build123d 0.9.2.dev40+gb1f0eed documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster.custom.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster.bundle.min.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-shadow.min.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-punk.min.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-noir.min.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-light.min.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-borderless.min.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/micromodal.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/sphinx_rtd_theme.css?v=3234e928" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=c97902b4"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
      <script src="_static/js/hoverxref.js"></script>
      <script src="_static/js/tooltipster.bundle.min.js"></script>
      <script src="_static/js/micromodal.min.js"></script>
      <script src="_static/design-tabs.js?v=f930bc37"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Too Tall Toby (TTT) Tutorials" href="tttt.html" />
    <link rel="prev" title="Joint Tutorial" href="tutorial_joints.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            build123d
              <img src="_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_concepts_builder.html">Key Concepts (builder mode)</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_concepts_algebra.html">Key Concepts (algebra mode)</a></li>
<li class="toctree-l1"><a class="reference internal" href="moving_objects.html">Moving Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="OpenSCAD.html">Transitioning from OpenSCAD</a></li>
<li class="toctree-l1"><a class="reference internal" href="introductory_examples.html">Introductory Examples</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tutorial_design.html">Designing a Part in build123d</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_selectors.html">Selector Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_lego.html">Lego Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_joints.html">Joint Tutorial</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">The build123d Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#benchy">Benchy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#former-build123d-logo">Former build123d Logo</a></li>
<li class="toctree-l3"><a class="reference internal" href="#canadian-flag-blowing-in-the-wind">Canadian Flag Blowing in The Wind</a></li>
<li class="toctree-l3"><a class="reference internal" href="#circuit-board-with-holes">Circuit Board With Holes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clock-face">Clock Face</a></li>
<li class="toctree-l3"><a class="reference internal" href="#handle">Handle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#heat-exchanger">Heat Exchanger</a></li>
<li class="toctree-l3"><a class="reference internal" href="#key-cap">Key Cap</a></li>
<li class="toctree-l3"><a class="reference internal" href="#maker-coin">Maker Coin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multi-sketch-loft">Multi-Sketch Loft</a></li>
<li class="toctree-l3"><a class="reference internal" href="#peg-board-hook">Peg Board Hook</a></li>
<li class="toctree-l3"><a class="reference internal" href="#platonic-solids">Platonic Solids</a></li>
<li class="toctree-l3"><a class="reference internal" href="#playing-cards">Playing Cards</a></li>
<li class="toctree-l3"><a class="reference internal" href="#stud-wall">Stud Wall</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tea-cup">Tea Cup</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vase">Vase</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tttt.html">Too Tall Toby (TTT) Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorial_surface_modeling.html">Surface Modeling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="selectors_operators.html">Selectors and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="operations.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="builders.html">Builders</a></li>
<li class="toctree-l1"><a class="reference internal" href="joints.html">Joints</a></li>
<li class="toctree-l1"><a class="reference internal" href="assemblies.html">Assemblies</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips.html">Tips, Best Practices and FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="import_export.html">Import/Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheat_sheet.html">Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="external.html">External Tools and Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder_api_reference.html">Builder Common API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="direct_api_reference.html">Direct API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">build123d</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="tutorials.html">Tutorials</a></li>
      <li class="breadcrumb-item active">The build123d Examples</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/examples_1.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="the-build123d-examples">
<h1>The build123d Examples<a class="headerlink" href="#the-build123d-examples" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>In the GitHub repository you will find an <a class="reference external" href="https://github.com/42sol-eu/build123d/tree/examples">examples folder</a>.</p>
<p>Most of the examples show the builder and algebra modes.</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row sd-row-cols-3 sd-row-cols-xs-3 sd-row-cols-sm-3 sd-row-cols-md-3 sd-row-cols-lg-3 docutils">
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/thumbnail_benchy_01.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Benchy 🔨</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#examples-benchy"><span class="std std-ref">Benchy</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/thumbnail_circuit_board_01.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Circuit Board With Holes 🔨 ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#examples-canadian-flag"><span class="std std-ref">Canadian Flag Blowing in The Wind</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/example_canadian_flag_01.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Canadian Flag Blowing in The Wind 🔨 ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#examples-circuit-board"><span class="std std-ref">Circuit Board With Holes</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/clock_face.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Clock Face 🔨 ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#clock-face"><span class="std std-ref">Clock Face</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/handle.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Handle 🔨 ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#handle"><span class="std std-ref">Handle</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/heat_exchanger.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Heat Exchanger 🔨 ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#heat-exchanger"><span class="std std-ref">Heat Exchanger</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/key_cap.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Key Cap 🔨 ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#key-cap"><span class="std std-ref">Key Cap</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/thumbnail_build123d_logo_01.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
(former) build123d Logo 🔨 ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#examples-build123d-logo"><span class="std std-ref">Former build123d Logo</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/maker_coin.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Maker Coin 🔨</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#maker-coin"><span class="std std-ref">Maker Coin</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/loft.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Multi-Sketch Loft 🔨 ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#multi-sketch-loft"><span class="std std-ref">Multi-Sketch Loft</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/peg_board_hook.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Peg Board J Hook 🔨  ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#peg-board-hook"><span class="std std-ref">Peg Board Hook</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/platonic_solids.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Platonic Solids ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#platonic-solids"><span class="std std-ref">Platonic Solids</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/playing_cards.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Playing Cards 🔨</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#playing-cards"><span class="std std-ref">Playing Cards</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/stud_wall.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Stud Wall ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#stud-wall"><span class="std std-ref">Stud Wall</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/tea_cup1.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Tea Cup 🔨 ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#tea-cup"><span class="std std-ref">Tea Cup</span></a></div>
</div>
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm sd-card-hover docutils">
<img alt="" class="sd-card-img-top" src="_images/vase.png" />
<div class="sd-card-body docutils">
<div class="sd-card-title sd-font-weight-bold docutils">
Vase 🔨 ✏️</div>
</div>
<a class="sd-stretched-link sd-hide-link-text reference internal" href="#vase"><span class="std std-ref">Vase</span></a></div>
</div>
</div>
</div>
</section>
<section id="benchy">
<span id="examples-benchy"></span><h2>Benchy<a class="headerlink" href="#benchy" title="Link to this heading"></a></h2>
<img alt="_images/example_benchy_01.png" class="align-center" src="_images/example_benchy_01.png" />
<p>The Benchy examples shows how to import a STL model as a <cite>Solid</cite> object with the class <cite>Mesher</cite> and
modify it by replacing chimney with a BREP version.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Gallery</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<img alt="_images/example_benchy_02.png" class="align-center" src="_images/example_benchy_02.png" />
<img alt="_images/example_benchy_03.png" class="align-center" src="_images/example_benchy_03.png" />
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import the benchy as a Solid model</span>
<span class="n">importer</span> <span class="o">=</span> <span class="n">Mesher</span><span class="p">()</span>
<span class="n">benchy_stl</span> <span class="o">=</span> <span class="n">importer</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;low_poly_benchy.stl&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">benchy</span><span class="p">:</span>
    <span class="n">add</span><span class="p">(</span><span class="n">benchy_stl</span><span class="p">)</span>

    <span class="c1"># Determine the plane that defines the top of the roof</span>
    <span class="n">vertices</span> <span class="o">=</span> <span class="n">benchy</span><span class="o">.</span><span class="n">vertices</span><span class="p">()</span>
    <span class="n">roof_vertices</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">filter_by_position</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
    <span class="n">roof_plane_vertices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">roof_vertices</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">tol_digits</span><span class="o">=</span><span class="mi">2</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">X</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">roof_vertices</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">roof_vertices</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">tol_digits</span><span class="o">=</span><span class="mi">2</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">X</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
    <span class="p">]</span>
    <span class="n">roof_plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span>
        <span class="n">Face</span><span class="p">(</span><span class="n">Wire</span><span class="o">.</span><span class="n">make_polygon</span><span class="p">([</span><span class="n">v</span><span class="o">.</span><span class="n">to_tuple</span><span class="p">()</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">roof_plane_vertices</span><span class="p">]))</span>
    <span class="p">)</span>
    <span class="c1"># Remove the faceted smoke stack</span>
    <span class="n">split</span><span class="p">(</span><span class="n">bisect_by</span><span class="o">=</span><span class="n">roof_plane</span><span class="p">,</span> <span class="n">keep</span><span class="o">=</span><span class="n">Keep</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">)</span>

    <span class="c1"># Determine the position and size of the smoke stack</span>
    <span class="n">smoke_stack_vertices</span> <span class="o">=</span> <span class="n">vertices</span><span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="n">tol_digits</span><span class="o">=</span><span class="mi">0</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">smoke_stack_center</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
        <span class="p">[</span><span class="n">Vector</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">Z</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">smoke_stack_vertices</span><span class="p">],</span> <span class="n">Vector</span><span class="p">()</span>
    <span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">smoke_stack_vertices</span><span class="p">))</span>
    <span class="n">smoke_stack_radius</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">(</span><span class="n">Vector</span><span class="p">(</span><span class="o">*</span><span class="n">v</span><span class="o">.</span><span class="n">to_tuple</span><span class="p">())</span> <span class="o">-</span> <span class="n">smoke_stack_center</span><span class="p">)</span><span class="o">.</span><span class="n">length</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">smoke_stack_vertices</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># Create the new smoke stack</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="p">(</span><span class="n">smoke_stack_center</span><span class="p">)):</span>
        <span class="n">Circle</span><span class="p">(</span><span class="n">smoke_stack_radius</span><span class="p">)</span>
        <span class="n">Circle</span><span class="p">(</span><span class="n">smoke_stack_radius</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=-</span><span class="mi">3</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="p">(</span><span class="n">smoke_stack_center</span><span class="p">)):</span>
        <span class="n">Circle</span><span class="p">(</span><span class="n">smoke_stack_radius</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>
        <span class="n">Circle</span><span class="p">(</span><span class="n">smoke_stack_radius</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">roof_plane_vertices</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">Z</span> <span class="o">-</span> <span class="n">smoke_stack_center</span><span class="o">.</span><span class="n">Z</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">benchy</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details></section>
<section id="former-build123d-logo">
<span id="examples-build123d-logo"></span><h2>Former build123d Logo<a class="headerlink" href="#former-build123d-logo" title="Link to this heading"></a></h2>
<img alt="_images/example_build123d_logo_01.png" class="align-center" src="_images/example_build123d_logo_01.png" />
<p>This example creates the former build123d logo (new logo was created in the end of 2023).</p>
<p>Using text and lines to create the first build123d logo.
The builder mode example also generates the SVG file <cite>logo.svg</cite>.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">logo_text</span><span class="p">:</span>
    <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;123d&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">))</span>
    <span class="n">font_height</span> <span class="o">=</span> <span class="n">logo_text</span><span class="o">.</span><span class="n">vertices</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">Y</span>

<span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">build_text</span><span class="p">:</span>
    <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;build&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">))</span>
    <span class="n">build_bb</span> <span class="o">=</span> <span class="n">bounding_box</span><span class="p">(</span><span class="n">build_text</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">PRIVATE</span><span class="p">)</span>
    <span class="n">build_vertices</span> <span class="o">=</span> <span class="n">build_bb</span><span class="o">.</span><span class="n">vertices</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>
    <span class="n">build_width</span> <span class="o">=</span> <span class="n">build_vertices</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">X</span> <span class="o">-</span> <span class="n">build_vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">X</span>

<span class="k">with</span> <span class="n">BuildLine</span><span class="p">()</span> <span class="k">as</span> <span class="n">one</span><span class="p">:</span>
    <span class="n">l1</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">font_height</span><span class="p">))</span>
    <span class="n">TangentArc</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.7</span><span class="p">),</span> <span class="n">tangent</span><span class="o">=</span><span class="p">(</span><span class="n">l1</span> <span class="o">%</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">two</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">Locations</span><span class="p">((</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mi">0</span><span class="p">)):</span>
        <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">))</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">three_d</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="p">((</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))):</span>
        <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;3d&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">))</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">)</span>
    <span class="n">logo_width</span> <span class="o">=</span> <span class="n">three_d</span><span class="o">.</span><span class="n">vertices</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">X</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">X</span>

<span class="k">with</span> <span class="n">BuildLine</span><span class="p">()</span> <span class="k">as</span> <span class="n">arrow_left</span><span class="p">:</span>
    <span class="n">t1</span> <span class="o">=</span> <span class="n">TangentArc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">),</span> <span class="n">tangent</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">mirror</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">Plane</span><span class="o">.</span><span class="n">XZ</span><span class="p">)</span>

<span class="n">ext_line_length</span> <span class="o">=</span> <span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.5</span>
<span class="n">dim_line_length</span> <span class="o">=</span> <span class="p">(</span><span class="n">logo_width</span> <span class="o">-</span> <span class="n">build_width</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
<span class="k">with</span> <span class="n">BuildLine</span><span class="p">()</span> <span class="k">as</span> <span class="n">extension_lines</span><span class="p">:</span>
    <span class="n">l1</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">ext_line_length</span> <span class="o">-</span> <span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">))</span>
    <span class="n">l2</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span>
        <span class="p">(</span><span class="n">logo_width</span><span class="p">,</span> <span class="o">-</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">),</span>
        <span class="p">(</span><span class="n">logo_width</span><span class="p">,</span> <span class="o">-</span><span class="n">ext_line_length</span> <span class="o">-</span> <span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">with</span> <span class="n">Locations</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mf">0.5</span><span class="p">):</span>
        <span class="n">add</span><span class="p">(</span><span class="n">arrow_left</span><span class="o">.</span><span class="n">line</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">Locations</span><span class="p">(</span><span class="n">l2</span> <span class="o">@</span> <span class="mf">0.5</span><span class="p">):</span>
        <span class="n">add</span><span class="p">(</span><span class="n">arrow_left</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mf">180.0</span><span class="p">)</span>
    <span class="n">Line</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">l1</span> <span class="o">@</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="n">dim_line_length</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="n">Line</span><span class="p">(</span><span class="n">l2</span> <span class="o">@</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">l2</span> <span class="o">@</span> <span class="mf">0.5</span> <span class="o">-</span> <span class="n">Vector</span><span class="p">(</span><span class="n">dim_line_length</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="c1"># Precisely center the build Faces</span>
<span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">build</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">Locations</span><span class="p">(</span>
        <span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">l2</span> <span class="o">@</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>
        <span class="o">-</span> <span class="n">Vector</span><span class="p">((</span><span class="n">build_vertices</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">X</span> <span class="o">+</span> <span class="n">build_vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">X</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">add</span><span class="p">(</span><span class="n">build_text</span><span class="o">.</span><span class="n">sketch</span><span class="p">)</span>


<span class="k">if</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">logo</span> <span class="o">=</span> <span class="n">Compound</span><span class="p">(</span>
        <span class="n">children</span><span class="o">=</span><span class="p">[</span>
            <span class="n">one</span><span class="o">.</span><span class="n">line</span><span class="p">,</span>
            <span class="n">two</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span>
            <span class="n">three_d</span><span class="o">.</span><span class="n">part</span><span class="p">,</span>
            <span class="n">extension_lines</span><span class="o">.</span><span class="n">line</span><span class="p">,</span>
            <span class="n">build</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">)</span>

    <span class="c1"># logo.export_step(&quot;logo.step&quot;)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">add_svg_shape</span><span class="p">(</span><span class="n">svg</span><span class="p">:</span> <span class="n">ExportSVG</span><span class="p">,</span> <span class="n">shape</span><span class="p">:</span> <span class="n">Shape</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]):</span>
        <span class="k">global</span> <span class="n">counter</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">counter</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">visible</span><span class="p">,</span> <span class="n">_hidden</span> <span class="o">=</span> <span class="n">shape</span><span class="o">.</span><span class="n">project_to_viewport</span><span class="p">(</span>
            <span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="n">viewport_up</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">look_at</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">svg</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">counter</span><span class="p">),</span> <span class="n">fill_color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">line_weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">svg</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">counter</span><span class="p">),</span> <span class="n">line_weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">svg</span><span class="o">.</span><span class="n">add_shape</span><span class="p">(</span><span class="n">visible</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">counter</span><span class="p">))</span>

    <span class="n">svg</span> <span class="o">=</span> <span class="n">ExportSVG</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">add_svg_shape</span><span class="p">(</span><span class="n">svg</span><span class="p">,</span> <span class="n">logo</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="c1"># add_svg_shape(svg, Compound(children=[one.line, extension_lines.line]), None)</span>
    <span class="c1"># add_svg_shape(svg, Compound(children=[two.sketch, build.sketch]), (170, 204, 255))</span>
    <span class="c1"># add_svg_shape(svg, three_d.part, (85, 153, 255))</span>
    <span class="n">svg</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;logo.svg&quot;</span><span class="p">)</span>

<span class="n">show_object</span><span class="p">(</span><span class="n">one</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;one&quot;</span><span class="p">)</span>
<span class="n">show_object</span><span class="p">(</span><span class="n">two</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;two&quot;</span><span class="p">)</span>
<span class="n">show_object</span><span class="p">(</span><span class="n">three_d</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;three_d&quot;</span><span class="p">)</span>
<span class="n">show_object</span><span class="p">(</span><span class="n">extension_lines</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;extension_lines&quot;</span><span class="p">)</span>
<span class="n">show_object</span><span class="p">(</span><span class="n">build</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;build&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">logo_text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;123d&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">)</span>
<span class="n">font_height</span> <span class="o">=</span> <span class="n">logo_text</span><span class="o">.</span><span class="n">vertices</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="o">.</span><span class="n">Y</span>

<span class="n">build_text</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;build&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">)</span>
<span class="n">build_bb</span> <span class="o">=</span> <span class="n">build_text</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span>
<span class="n">build_width</span> <span class="o">=</span> <span class="n">build_bb</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">X</span> <span class="o">-</span> <span class="n">build_bb</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">X</span>

<span class="n">l1</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">font_height</span><span class="p">))</span>
<span class="n">one</span> <span class="o">=</span> <span class="n">l1</span> <span class="o">+</span> <span class="n">TangentArc</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.7</span><span class="p">),</span> <span class="n">tangent</span><span class="o">=</span><span class="p">(</span><span class="n">l1</span> <span class="o">%</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

<span class="n">two</span> <span class="o">=</span> <span class="n">Pos</span><span class="p">(</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">)</span>

<span class="n">three_d</span> <span class="o">=</span> <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;3d&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">)</span>
<span class="n">three_d</span> <span class="o">=</span> <span class="n">Pos</span><span class="p">(</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">extrude</span><span class="p">(</span><span class="n">three_d</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.3</span><span class="p">)</span>
<span class="n">logo_width</span> <span class="o">=</span> <span class="n">three_d</span><span class="o">.</span><span class="n">vertices</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">X</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="o">.</span><span class="n">X</span>

<span class="n">t1</span> <span class="o">=</span> <span class="n">TangentArc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">),</span> <span class="n">tangent</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">arrow_left</span> <span class="o">=</span> <span class="n">t1</span> <span class="o">+</span> <span class="n">mirror</span><span class="p">(</span><span class="n">t1</span><span class="p">,</span> <span class="n">Plane</span><span class="o">.</span><span class="n">XZ</span><span class="p">)</span>

<span class="n">ext_line_length</span> <span class="o">=</span> <span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.5</span>
<span class="n">dim_line_length</span> <span class="o">=</span> <span class="p">(</span><span class="n">logo_width</span> <span class="o">-</span> <span class="n">build_width</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

<span class="n">l1</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">ext_line_length</span> <span class="o">-</span> <span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">))</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span>
    <span class="p">(</span><span class="n">logo_width</span><span class="p">,</span> <span class="o">-</span><span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">),</span>
    <span class="p">(</span><span class="n">logo_width</span><span class="p">,</span> <span class="o">-</span><span class="n">ext_line_length</span> <span class="o">-</span> <span class="n">font_height</span> <span class="o">*</span> <span class="mf">0.1</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">extension_lines</span> <span class="o">=</span> <span class="n">Curve</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">l1</span> <span class="o">+</span> <span class="n">l2</span><span class="p">)</span>
<span class="n">extension_lines</span> <span class="o">+=</span> <span class="n">Pos</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mf">0.5</span><span class="p">))</span> <span class="o">*</span> <span class="n">arrow_left</span>
<span class="n">extension_lines</span> <span class="o">+=</span> <span class="p">(</span><span class="n">Pos</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">l2</span> <span class="o">@</span> <span class="mf">0.5</span><span class="p">))</span> <span class="o">*</span> <span class="n">Rot</span><span class="p">(</span><span class="n">Z</span><span class="o">=</span><span class="mi">180</span><span class="p">))</span> <span class="o">*</span> <span class="n">arrow_left</span>
<span class="n">extension_lines</span> <span class="o">+=</span> <span class="n">Line</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">l1</span> <span class="o">@</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="n">dim_line_length</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">extension_lines</span> <span class="o">+=</span> <span class="n">Line</span><span class="p">(</span><span class="n">l2</span> <span class="o">@</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">l2</span> <span class="o">@</span> <span class="mf">0.5</span> <span class="o">-</span> <span class="n">Vector</span><span class="p">(</span><span class="n">dim_line_length</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>

<span class="c1"># Precisely center the build Faces</span>
<span class="n">p1</span> <span class="o">=</span> <span class="n">Pos</span><span class="p">((</span><span class="n">l1</span> <span class="o">@</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">l2</span> <span class="o">@</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">Vector</span><span class="p">((</span><span class="n">build_bb</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">X</span> <span class="o">+</span> <span class="n">build_bb</span><span class="o">.</span><span class="n">min</span><span class="o">.</span><span class="n">X</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">build</span> <span class="o">=</span> <span class="n">p1</span> <span class="o">*</span> <span class="n">build_text</span>

<span class="n">cmpd</span> <span class="o">=</span> <span class="n">Compound</span><span class="p">([</span><span class="n">three_d</span><span class="p">,</span> <span class="n">two</span><span class="p">,</span> <span class="n">one</span><span class="p">,</span> <span class="n">build</span><span class="p">,</span> <span class="n">extension_lines</span><span class="p">])</span>

<span class="n">show_object</span><span class="p">(</span><span class="n">cmpd</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;compound&quot;</span><span class="p">)</span>

</pre></div>
</div>
</div>
</details></section>
<section id="canadian-flag-blowing-in-the-wind">
<span id="examples-canadian-flag"></span><h2>Canadian Flag Blowing in The Wind<a class="headerlink" href="#canadian-flag-blowing-in-the-wind" title="Link to this heading"></a></h2>
<img alt="_images/example_canadian_flag_01.png" class="align-center" src="_images/example_canadian_flag_01.png" />
<p>A Canadian Flag blowing in the wind created by projecting planar faces onto a non-planar face (the_wind).</p>
<p>This example also demonstrates building complex lines that snap to existing features.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">More Images</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<img alt="_images/example_canadian_flag_02.png" class="align-center" src="_images/example_canadian_flag_02.png" />
<img alt="_images/example_canadian_flag_03.png" class="align-center" src="_images/example_canadian_flag_03.png" />
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>

<span class="k">def</span><span class="w"> </span><span class="nf">surface</span><span class="p">(</span><span class="n">amplitude</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate the surface displacement of the flag at a given position&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">v</span> <span class="o">*</span> <span class="n">amplitude</span> <span class="o">/</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="mf">3.5</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">amplitude</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">v</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span>
        <span class="mf">1.1</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">v</span>
    <span class="p">)</span>


<span class="c1"># Note that the surface to project on must be a little larger than the faces</span>
<span class="c1"># being projected onto it to create valid projected faces</span>
<span class="n">the_wind</span> <span class="o">=</span> <span class="n">Face</span><span class="o">.</span><span class="n">make_surface_from_array_of_points</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">[</span>
            <span class="n">Vector</span><span class="p">(</span>
                <span class="n">width</span> <span class="o">*</span> <span class="p">(</span><span class="n">v</span> <span class="o">*</span> <span class="mf">1.1</span> <span class="o">/</span> <span class="mi">40</span> <span class="o">-</span> <span class="mf">0.05</span><span class="p">),</span>
                <span class="n">height</span> <span class="o">*</span> <span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="mf">1.2</span> <span class="o">/</span> <span class="mi">40</span> <span class="o">-</span> <span class="mf">0.1</span><span class="p">),</span>
                <span class="n">height</span> <span class="o">*</span> <span class="n">surface</span><span class="p">(</span><span class="n">wave_amplitude</span><span class="p">,</span> <span class="n">u</span> <span class="o">/</span> <span class="mi">40</span><span class="p">,</span> <span class="n">v</span> <span class="o">/</span> <span class="mi">40</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">41</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">41</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
<span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="o">.</span><span class="n">XY</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span> <span class="k">as</span> <span class="n">west_field_builder</span><span class="p">:</span>
    <span class="n">Rectangle</span><span class="p">(</span><span class="n">width</span> <span class="o">/</span> <span class="mi">4</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">))</span>
<span class="n">west_field_planar</span> <span class="o">=</span> <span class="n">west_field_builder</span><span class="o">.</span><span class="n">sketch</span><span class="o">.</span><span class="n">faces</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">east_field_planar</span> <span class="o">=</span> <span class="n">west_field_planar</span><span class="o">.</span><span class="n">mirror</span><span class="p">(</span><span class="n">Plane</span><span class="o">.</span><span class="n">YZ</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>

<span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="p">((</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)))</span> <span class="k">as</span> <span class="n">center_field_builder</span><span class="p">:</span>
    <span class="n">Rectangle</span><span class="p">(</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">))</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span>
        <span class="n">Plane</span><span class="p">((</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)),</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">maple_leaf_builder</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">BuildLine</span><span class="p">()</span> <span class="k">as</span> <span class="n">outline</span><span class="p">:</span>
            <span class="n">l1</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.0000</span><span class="p">,</span> <span class="mf">0.0771</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0187</span><span class="p">,</span> <span class="mf">0.0771</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0094</span><span class="p">,</span> <span class="mf">0.2569</span><span class="p">))</span>
            <span class="n">l2</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.0325</span><span class="p">,</span> <span class="mf">0.2773</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.2115</span><span class="p">,</span> <span class="mf">0.2458</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1873</span><span class="p">,</span> <span class="mf">0.3125</span><span class="p">))</span>
            <span class="n">RadiusArc</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l2</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0271</span><span class="p">)</span>
            <span class="n">l3</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.1915</span><span class="p">,</span> <span class="mf">0.3277</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3875</span><span class="p">,</span> <span class="mf">0.4865</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3433</span><span class="p">,</span> <span class="mf">0.5071</span><span class="p">))</span>
            <span class="n">TangentArc</span><span class="p">(</span><span class="n">l2</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l3</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="n">l2</span> <span class="o">%</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">l4</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.3362</span><span class="p">,</span> <span class="mf">0.5235</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.375</span><span class="p">,</span> <span class="mf">0.6427</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.2621</span><span class="p">,</span> <span class="mf">0.6188</span><span class="p">))</span>
            <span class="n">SagittaArc</span><span class="p">(</span><span class="n">l3</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l4</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.003</span><span class="p">)</span>
            <span class="n">l5</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.2469</span><span class="p">,</span> <span class="mf">0.6267</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.225</span><span class="p">,</span> <span class="mf">0.6781</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1369</span><span class="p">,</span> <span class="mf">0.5835</span><span class="p">))</span>
            <span class="n">ThreePointArc</span><span class="p">(</span>
                <span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">l5</span> <span class="o">@</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="o">-</span><span class="mf">0.002</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.002</span><span class="p">),</span> <span class="n">l5</span> <span class="o">@</span> <span class="mi">0</span>
            <span class="p">)</span>
            <span class="n">l6</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.1138</span><span class="p">,</span> <span class="mf">0.5954</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1562</span><span class="p">,</span> <span class="mf">0.8146</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0881</span><span class="p">,</span> <span class="mf">0.7752</span><span class="p">))</span>
            <span class="n">Spline</span><span class="p">(</span>
                <span class="n">l5</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">l6</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span>
                <span class="n">tangents</span><span class="o">=</span><span class="p">(</span><span class="n">l5</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l6</span> <span class="o">%</span> <span class="mi">0</span><span class="p">),</span>
                <span class="n">tangent_scalars</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">l7</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="mf">0.0692</span><span class="p">,</span> <span class="mf">0.7808</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0000</span><span class="p">,</span> <span class="mf">0.9167</span><span class="p">))</span>
            <span class="n">TangentArc</span><span class="p">(</span><span class="n">l6</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l7</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="n">l6</span> <span class="o">%</span> <span class="mi">1</span><span class="p">)</span>
            <span class="n">mirror</span><span class="p">(</span><span class="n">outline</span><span class="o">.</span><span class="n">edges</span><span class="p">(),</span> <span class="n">Plane</span><span class="o">.</span><span class="n">YZ</span><span class="p">)</span>
        <span class="n">make_face</span><span class="p">()</span>
        <span class="n">scale</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">height</span><span class="p">)</span>
<span class="n">maple_leaf_planar</span> <span class="o">=</span> <span class="n">maple_leaf_builder</span><span class="o">.</span><span class="n">sketch</span><span class="o">.</span><span class="n">faces</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">center_field_planar</span> <span class="o">=</span> <span class="n">center_field_builder</span><span class="o">.</span><span class="n">sketch</span><span class="o">.</span><span class="n">faces</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">west_field</span> <span class="o">=</span> <span class="n">west_field_planar</span><span class="o">.</span><span class="n">project_to_shape</span><span class="p">(</span><span class="n">the_wind</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">west_field</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
<span class="n">east_field</span> <span class="o">=</span> <span class="n">east_field_planar</span><span class="o">.</span><span class="n">project_to_shape</span><span class="p">(</span><span class="n">the_wind</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">east_field</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
<span class="n">center_field</span> <span class="o">=</span> <span class="n">center_field_planar</span><span class="o">.</span><span class="n">project_to_shape</span><span class="p">(</span><span class="n">the_wind</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">center_field</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
<span class="n">maple_leaf</span> <span class="o">=</span> <span class="n">maple_leaf_planar</span><span class="o">.</span><span class="n">project_to_shape</span><span class="p">(</span><span class="n">the_wind</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">maple_leaf</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>

<span class="n">canadian_flag</span> <span class="o">=</span> <span class="n">Compound</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">west_field</span><span class="p">,</span> <span class="n">east_field</span><span class="p">,</span> <span class="n">center_field</span><span class="p">,</span> <span class="n">maple_leaf</span><span class="p">])</span>
<span class="n">show</span><span class="p">(</span><span class="n">Rot</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">canadian_flag</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">surface</span><span class="p">(</span><span class="n">amplitude</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Calculate the surface displacement of the flag at a given position&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">v</span> <span class="o">*</span> <span class="n">amplitude</span> <span class="o">/</span> <span class="mi">20</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="mf">3.5</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">amplitude</span> <span class="o">/</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">v</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span>
        <span class="mf">1.1</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">*</span> <span class="n">v</span>
    <span class="p">)</span>


<span class="c1"># Note that the surface to project on must be a little larger than the faces</span>
<span class="c1"># being projected onto it to create valid projected faces</span>
<span class="n">the_wind</span> <span class="o">=</span> <span class="n">Face</span><span class="o">.</span><span class="n">make_surface_from_array_of_points</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="p">[</span>
            <span class="n">Vector</span><span class="p">(</span>
                <span class="n">width</span> <span class="o">*</span> <span class="p">(</span><span class="n">v</span> <span class="o">*</span> <span class="mf">1.1</span> <span class="o">/</span> <span class="mi">40</span> <span class="o">-</span> <span class="mf">0.05</span><span class="p">),</span>
                <span class="n">height</span> <span class="o">*</span> <span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="mf">1.2</span> <span class="o">/</span> <span class="mi">40</span> <span class="o">-</span> <span class="mf">0.1</span><span class="p">),</span>
                <span class="n">height</span> <span class="o">*</span> <span class="n">surface</span><span class="p">(</span><span class="n">wave_amplitude</span><span class="p">,</span> <span class="n">u</span> <span class="o">/</span> <span class="mi">40</span><span class="p">,</span> <span class="n">v</span> <span class="o">/</span> <span class="mi">40</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">41</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">41</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="n">field_planar</span> <span class="o">=</span> <span class="n">Plane</span><span class="o">.</span><span class="n">XY</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">Rectangle</span><span class="p">(</span><span class="n">width</span> <span class="o">/</span> <span class="mi">4</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">)</span>
<span class="n">west_field_planar</span> <span class="o">=</span> <span class="n">field_planar</span><span class="o">.</span><span class="n">faces</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">east_field_planar</span> <span class="o">=</span> <span class="n">mirror</span><span class="p">(</span><span class="n">west_field_planar</span><span class="p">,</span> <span class="n">Plane</span><span class="o">.</span><span class="n">YZ</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>

<span class="n">l1</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.0000</span><span class="p">,</span> <span class="mf">0.0771</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0187</span><span class="p">,</span> <span class="mf">0.0771</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0094</span><span class="p">,</span> <span class="mf">0.2569</span><span class="p">))</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.0325</span><span class="p">,</span> <span class="mf">0.2773</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.2115</span><span class="p">,</span> <span class="mf">0.2458</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1873</span><span class="p">,</span> <span class="mf">0.3125</span><span class="p">))</span>
<span class="n">r1</span> <span class="o">=</span> <span class="n">RadiusArc</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l2</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.0271</span><span class="p">)</span>
<span class="n">l3</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.1915</span><span class="p">,</span> <span class="mf">0.3277</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3875</span><span class="p">,</span> <span class="mf">0.4865</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.3433</span><span class="p">,</span> <span class="mf">0.5071</span><span class="p">))</span>
<span class="n">r2</span> <span class="o">=</span> <span class="n">TangentArc</span><span class="p">(</span><span class="n">l2</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l3</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="n">l2</span> <span class="o">%</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">l4</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.3362</span><span class="p">,</span> <span class="mf">0.5235</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.375</span><span class="p">,</span> <span class="mf">0.6427</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.2621</span><span class="p">,</span> <span class="mf">0.6188</span><span class="p">))</span>
<span class="n">r3</span> <span class="o">=</span> <span class="n">SagittaArc</span><span class="p">(</span><span class="n">l3</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l4</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.003</span><span class="p">)</span>
<span class="n">l5</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.2469</span><span class="p">,</span> <span class="mf">0.6267</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.225</span><span class="p">,</span> <span class="mf">0.6781</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1369</span><span class="p">,</span> <span class="mf">0.5835</span><span class="p">))</span>
<span class="n">r4</span> <span class="o">=</span> <span class="n">ThreePointArc</span><span class="p">(</span><span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">l5</span> <span class="o">@</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.5</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="o">-</span><span class="mf">0.002</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.002</span><span class="p">),</span> <span class="n">l5</span> <span class="o">@</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">l6</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mf">0.1138</span><span class="p">,</span> <span class="mf">0.5954</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1562</span><span class="p">,</span> <span class="mf">0.8146</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0881</span><span class="p">,</span> <span class="mf">0.7752</span><span class="p">))</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">Spline</span><span class="p">(</span>
    <span class="n">l5</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">l6</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">tangents</span><span class="o">=</span><span class="p">(</span><span class="n">l5</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l6</span> <span class="o">%</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">tangent_scalars</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">l7</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="mf">0.0692</span><span class="p">,</span> <span class="mf">0.7808</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0000</span><span class="p">,</span> <span class="mf">0.9167</span><span class="p">))</span>
<span class="n">r5</span> <span class="o">=</span> <span class="n">TangentArc</span><span class="p">(</span><span class="n">l6</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l7</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="n">l6</span> <span class="o">%</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">outline</span> <span class="o">=</span> <span class="n">l1</span> <span class="o">+</span> <span class="p">[</span><span class="n">l2</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">l3</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">l4</span><span class="p">,</span> <span class="n">r3</span><span class="p">,</span> <span class="n">l5</span><span class="p">,</span> <span class="n">r4</span><span class="p">,</span> <span class="n">l6</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">l7</span><span class="p">,</span> <span class="n">r5</span><span class="p">]</span>
<span class="n">outline</span> <span class="o">+=</span> <span class="n">mirror</span><span class="p">(</span><span class="n">outline</span><span class="p">,</span> <span class="n">Plane</span><span class="o">.</span><span class="n">YZ</span><span class="p">)</span>

<span class="n">maple_leaf_planar</span> <span class="o">=</span> <span class="n">make_face</span><span class="p">(</span><span class="n">outline</span><span class="p">)</span>

<span class="n">center_field_planar</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">Rectangle</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">))</span> <span class="o">-</span> <span class="n">maple_leaf_planar</span>
<span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">scale_move</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Plane</span><span class="p">((</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span> <span class="o">*</span> <span class="n">scale</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">project</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">obj</span><span class="o">.</span><span class="n">faces</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">project_to_shape</span><span class="p">(</span><span class="n">the_wind</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>


<span class="n">maple_leaf_planar</span> <span class="o">=</span> <span class="n">scale_move</span><span class="p">(</span><span class="n">maple_leaf_planar</span><span class="p">)</span>
<span class="n">center_field_planar</span> <span class="o">=</span> <span class="n">scale_move</span><span class="p">(</span><span class="n">center_field_planar</span><span class="p">)</span>

<span class="n">west_field</span> <span class="o">=</span> <span class="n">project</span><span class="p">(</span><span class="n">west_field_planar</span><span class="p">)</span>
<span class="n">west_field</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
<span class="n">east_field</span> <span class="o">=</span> <span class="n">project</span><span class="p">(</span><span class="n">east_field_planar</span><span class="p">)</span>
<span class="n">east_field</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>
<span class="n">center_field</span> <span class="o">=</span> <span class="n">project</span><span class="p">(</span><span class="n">center_field_planar</span><span class="p">)</span>
<span class="n">center_field</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
<span class="n">maple_leaf</span> <span class="o">=</span> <span class="n">project</span><span class="p">(</span><span class="n">maple_leaf_planar</span><span class="p">)</span>
<span class="n">maple_leaf</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;red&quot;</span><span class="p">)</span>

<span class="n">canadian_flag</span> <span class="o">=</span> <span class="n">Compound</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">west_field</span><span class="p">,</span> <span class="n">east_field</span><span class="p">,</span> <span class="n">center_field</span><span class="p">,</span> <span class="n">maple_leaf</span><span class="p">])</span>
<span class="n">show</span><span class="p">(</span><span class="n">Rot</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">canadian_flag</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details></section>
<section id="circuit-board-with-holes">
<span id="examples-circuit-board"></span><h2>Circuit Board With Holes<a class="headerlink" href="#circuit-board-with-holes" title="Link to this heading"></a></h2>
<img alt="_images/example_circuit_board_01.png" class="align-center" src="_images/example_circuit_board_01.png" />
<p>This example demonstrates placing holes around a part.</p>
<ul class="simple">
<li><p>Builder mode uses <cite>Locations</cite> context to place the positions.</p></li>
<li><p>Algebra mode uses <cite>product</cite> and <cite>range</cite> to calculate the positions.</p></li>
</ul>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">More Images</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<img alt="_images/example_circuit_board_02.png" class="align-center" src="_images/example_circuit_board_02.png" />
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">pcb</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">():</span>
        <span class="n">Rectangle</span><span class="p">(</span><span class="n">pcb_length</span><span class="p">,</span> <span class="n">pcb_width</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">65</span> <span class="o">//</span> <span class="mi">5</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">-</span> <span class="mi">30</span>
            <span class="k">with</span> <span class="n">Locations</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">15</span><span class="p">)):</span>
                <span class="n">Circle</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span> <span class="o">//</span> <span class="mi">5</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">-</span> <span class="mi">10</span>
            <span class="k">with</span> <span class="n">Locations</span><span class="p">((</span><span class="mi">30</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="n">y</span><span class="p">)):</span>
                <span class="n">Circle</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">GridLocations</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>
            <span class="n">Circle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">pcb_height</span><span class="p">)</span>

<span class="n">show_object</span><span class="p">(</span><span class="n">pcb</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">wrapped</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x_coords</span> <span class="o">=</span> <span class="n">product</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">65</span> <span class="o">//</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">15</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">))</span>
<span class="n">y_coords</span> <span class="o">=</span> <span class="n">product</span><span class="p">((</span><span class="mi">30</span><span class="p">,</span> <span class="mi">35</span><span class="p">),</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span> <span class="o">//</span> <span class="mi">5</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>

<span class="n">pcb</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="n">pcb_length</span><span class="p">,</span> <span class="n">pcb_width</span><span class="p">)</span>
<span class="n">pcb</span> <span class="o">-=</span> <span class="p">[</span><span class="n">Pos</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">-</span> <span class="mi">30</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="o">*</span> <span class="n">Circle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">x_coords</span><span class="p">]</span>
<span class="n">pcb</span> <span class="o">-=</span> <span class="p">[</span><span class="n">Pos</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">5</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">Circle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">y_coords</span><span class="p">]</span>
<span class="n">pcb</span> <span class="o">-=</span> <span class="p">[</span><span class="n">loc</span> <span class="o">*</span> <span class="n">Circle</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">GridLocations</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]</span>

<span class="n">pcb</span> <span class="o">=</span> <span class="n">extrude</span><span class="p">(</span><span class="n">pcb</span><span class="p">,</span> <span class="n">pcb_height</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">pcb</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details></section>
<section id="clock-face">
<span id="id1"></span><h2>Clock Face<a class="headerlink" href="#clock-face" title="Link to this heading"></a></h2>
<img alt="_images/clock_face.png" class="align-center" src="_images/clock_face.png" />
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show</span>

<span class="n">clock_radius</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">minute_indicator</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">BuildLine</span><span class="p">()</span> <span class="k">as</span> <span class="n">outline</span><span class="p">:</span>
        <span class="n">l1</span> <span class="o">=</span> <span class="n">CenterArc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.975</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">)</span>
        <span class="n">l2</span> <span class="o">=</span> <span class="n">CenterArc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.925</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">)</span>
        <span class="n">Line</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">l2</span> <span class="o">@</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">Line</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l2</span> <span class="o">@</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">make_face</span><span class="p">()</span>
    <span class="n">fillet</span><span class="p">(</span><span class="n">minute_indicator</span><span class="o">.</span><span class="n">vertices</span><span class="p">(),</span> <span class="n">radius</span><span class="o">=</span><span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">)</span>

<span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">clock_face</span><span class="p">:</span>
    <span class="n">Circle</span><span class="p">(</span><span class="n">clock_radius</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">PolarLocations</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">):</span>
        <span class="n">add</span><span class="p">(</span><span class="n">minute_indicator</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">PolarLocations</span><span class="p">(</span><span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.875</span><span class="p">,</span> <span class="mi">12</span><span class="p">):</span>
        <span class="n">SlotOverall</span><span class="p">(</span><span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.025</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">hour</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">PolarLocations</span><span class="p">(</span><span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="n">hour</span> <span class="o">*</span> <span class="mi">30</span> <span class="o">+</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">360</span><span class="p">,</span> <span class="n">rotate</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
            <span class="n">Text</span><span class="p">(</span>
                <span class="nb">str</span><span class="p">(</span><span class="n">hour</span><span class="p">),</span>
                <span class="n">font_size</span><span class="o">=</span><span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.175</span><span class="p">,</span>
                <span class="n">font_style</span><span class="o">=</span><span class="n">FontStyle</span><span class="o">.</span><span class="n">BOLD</span><span class="p">,</span>
                <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">,</span>
            <span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">clock_face</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show</span>

<span class="n">clock_radius</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">l1</span> <span class="o">=</span> <span class="n">CenterArc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.975</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">)</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">CenterArc</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.925</span><span class="p">,</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">)</span>
<span class="n">l3</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">l2</span> <span class="o">@</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">l4</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l2</span> <span class="o">@</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">minute_indicator</span> <span class="o">=</span> <span class="n">make_face</span><span class="p">([</span><span class="n">l1</span><span class="p">,</span> <span class="n">l3</span><span class="p">,</span> <span class="n">l2</span><span class="p">,</span> <span class="n">l4</span><span class="p">])</span>
<span class="n">minute_indicator</span> <span class="o">=</span> <span class="n">fillet</span><span class="p">(</span><span class="n">minute_indicator</span><span class="o">.</span><span class="n">vertices</span><span class="p">(),</span> <span class="n">radius</span><span class="o">=</span><span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">)</span>

<span class="n">clock_face</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="n">clock_radius</span><span class="p">)</span>
<span class="n">clock_face</span> <span class="o">-=</span> <span class="n">PolarLocations</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span> <span class="o">*</span> <span class="n">minute_indicator</span>
<span class="n">clock_face</span> <span class="o">-=</span> <span class="n">PolarLocations</span><span class="p">(</span><span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.875</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span> <span class="o">*</span> <span class="n">SlotOverall</span><span class="p">(</span>
    <span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.05</span><span class="p">,</span> <span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.025</span>
<span class="p">)</span>

<span class="n">clock_face</span> <span class="o">-=</span> <span class="p">[</span>
    <span class="n">loc</span>
    <span class="o">*</span> <span class="n">Text</span><span class="p">(</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">hour</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">font_size</span><span class="o">=</span><span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.175</span><span class="p">,</span>
        <span class="n">font_style</span><span class="o">=</span><span class="n">FontStyle</span><span class="o">.</span><span class="n">BOLD</span><span class="p">,</span>
        <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">hour</span><span class="p">,</span> <span class="n">loc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span>
        <span class="n">PolarLocations</span><span class="p">(</span><span class="n">clock_radius</span> <span class="o">*</span> <span class="mf">0.75</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="o">-</span><span class="mi">360</span><span class="p">,</span> <span class="n">rotate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="p">)</span>
<span class="p">]</span>

<span class="n">show</span><span class="p">(</span><span class="n">clock_face</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><p>The Python code utilizes the build123d library to create a 3D model of a clock face.
It defines a minute indicator with arcs and lines, applying fillets, and then
integrates it into the clock face sketch. The clock face includes a circular outline,
hour labels, and slots at specified positions. The resulting 3D model represents
a detailed and visually appealing clock design.</p>
<p><a class="hxr-hoverxref hxr-tooltip reference internal" href="builder_api_reference.html#build_common.PolarLocations" title="build_common.PolarLocations"><code class="xref py py-class docutils literal notranslate"><span class="pre">PolarLocations</span></code></a> are used to position features on the clock face.</p>
</section>
<section id="handle">
<span id="id2"></span><h2>Handle<a class="headerlink" href="#handle" title="Link to this heading"></a></h2>
<img alt="_images/handle.png" class="align-center" src="_images/handle.png" />
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show_object</span>

<span class="n">segment_count</span> <span class="o">=</span> <span class="mi">6</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
    <span class="c1"># Create a path for the sweep along the handle - added to pending_edges</span>
    <span class="k">with</span> <span class="n">BuildLine</span><span class="p">()</span> <span class="k">as</span> <span class="n">handle_center_line</span><span class="p">:</span>
        <span class="n">Spline</span><span class="p">(</span>
            <span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">tangents</span><span class="o">=</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)),</span>
            <span class="n">tangent_scalars</span><span class="o">=</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="c1"># Create the cross sections - added to pending_faces</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">segment_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">handle_center_line</span><span class="o">.</span><span class="n">line</span> <span class="o">^</span> <span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="n">segment_count</span><span class="p">))</span> <span class="k">as</span> <span class="n">section</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="n">segment_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">Circle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">Rectangle</span><span class="p">(</span><span class="mf">1.25</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
                <span class="n">fillet</span><span class="p">(</span><span class="n">section</span><span class="o">.</span><span class="n">vertices</span><span class="p">(),</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="c1"># Record the sections for display</span>
    <span class="n">sections</span> <span class="o">=</span> <span class="n">handle</span><span class="o">.</span><span class="n">pending_faces</span>

    <span class="c1"># Create the handle by sweeping along the path</span>
    <span class="n">sweep</span><span class="p">(</span><span class="n">multisection</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">handle</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">volume</span> <span class="o">-</span> <span class="mf">94.77361455046953</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-3</span>

<span class="n">show_object</span><span class="p">(</span><span class="n">handle_center_line</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;handle_center_line&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">section</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sections</span><span class="p">):</span>
    <span class="n">show_object</span><span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;section&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
<span class="n">show_object</span><span class="p">(</span><span class="n">handle</span><span class="o">.</span><span class="n">part</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;handle&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">))</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show_object</span>

<span class="n">segment_count</span> <span class="o">=</span> <span class="mi">6</span>

<span class="c1"># Create a path for the sweep along the handle - added to pending_edges</span>
<span class="n">handle_center_line</span> <span class="o">=</span> <span class="n">Spline</span><span class="p">(</span>
    <span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">tangents</span><span class="o">=</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)),</span>
    <span class="n">tangent_scalars</span><span class="o">=</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">1.5</span><span class="p">),</span>
<span class="p">)</span>

<span class="c1"># Create the cross sections - added to pending_faces</span>
<span class="n">sections</span> <span class="o">=</span> <span class="n">Sketch</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">segment_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">location</span> <span class="o">=</span> <span class="n">handle_center_line</span> <span class="o">^</span> <span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="n">segment_count</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">%</span> <span class="n">segment_count</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">circle</span> <span class="o">=</span> <span class="n">location</span> <span class="o">*</span> <span class="n">Circle</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">circle</span> <span class="o">=</span> <span class="n">location</span> <span class="o">*</span> <span class="n">Rectangle</span><span class="p">(</span><span class="mf">1.25</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">circle</span> <span class="o">=</span> <span class="n">fillet</span><span class="p">(</span><span class="n">circle</span><span class="o">.</span><span class="n">vertices</span><span class="p">(),</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
    <span class="n">sections</span> <span class="o">+=</span> <span class="n">circle</span>

<span class="c1"># Create the handle by sweeping along the path</span>
<span class="n">handle</span> <span class="o">=</span> <span class="n">sweep</span><span class="p">(</span><span class="n">sections</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">handle_center_line</span><span class="p">,</span> <span class="n">multisection</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">show_object</span><span class="p">(</span><span class="n">handle_center_line</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;handle_path&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">circle</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sections</span><span class="p">):</span>
    <span class="n">show_object</span><span class="p">(</span><span class="n">circle</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;section&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
<span class="n">show_object</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;handle&quot;</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.6</span><span class="p">))</span>
</pre></div>
</div>
</div>
</details><p>This example demonstrates multisection sweep creating a drawer handle.</p>
</section>
<section id="heat-exchanger">
<span id="id3"></span><h2>Heat Exchanger<a class="headerlink" href="#heat-exchanger" title="Link to this heading"></a></h2>
<img alt="_images/heat_exchanger.png" class="align-center" src="_images/heat_exchanger.png" />
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show</span>

<span class="n">exchanger_diameter</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">CM</span>
<span class="n">exchanger_length</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">CM</span>
<span class="n">plate_thickness</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">MM</span>
<span class="c1"># 149 tubes</span>
<span class="n">tube_diameter</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">MM</span>
<span class="n">tube_spacing</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">MM</span>
<span class="n">tube_wall_thickness</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">MM</span>
<span class="n">tube_extension</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">MM</span>
<span class="n">bundle_diameter</span> <span class="o">=</span> <span class="n">exchanger_diameter</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">tube_diameter</span>
<span class="n">fillet_radius</span> <span class="o">=</span> <span class="n">tube_spacing</span> <span class="o">/</span> <span class="mi">3</span>
<span class="k">assert</span> <span class="n">tube_extension</span> <span class="o">&gt;</span> <span class="n">fillet_radius</span>

<span class="c1"># Build the heat exchanger</span>
<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">heat_exchanger</span><span class="p">:</span>
    <span class="c1"># Generate list of tube locations</span>
    <span class="n">tube_locations</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">l</span>
        <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">HexLocations</span><span class="p">(</span>
            <span class="n">radius</span><span class="o">=</span><span class="p">(</span><span class="n">tube_diameter</span> <span class="o">+</span> <span class="n">tube_spacing</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
            <span class="n">x_count</span><span class="o">=</span><span class="n">exchanger_diameter</span> <span class="o">//</span> <span class="n">tube_diameter</span><span class="p">,</span>
            <span class="n">y_count</span><span class="o">=</span><span class="n">exchanger_diameter</span> <span class="o">//</span> <span class="n">tube_diameter</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">l</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;</span> <span class="n">bundle_diameter</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="p">]</span>
    <span class="n">tube_count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">tube_locations</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">tube_plan</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">Locations</span><span class="p">(</span><span class="o">*</span><span class="n">tube_locations</span><span class="p">):</span>
            <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">tube_diameter</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
            <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">tube_diameter</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">tube_wall_thickness</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">exchanger_length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span>
        <span class="n">Plane</span><span class="p">(</span>
            <span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">exchanger_length</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">tube_extension</span> <span class="o">-</span> <span class="n">plate_thickness</span><span class="p">),</span>
            <span class="n">z_dir</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">plate_plan</span><span class="p">:</span>
        <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">exchanger_diameter</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">Locations</span><span class="p">(</span><span class="o">*</span><span class="n">tube_locations</span><span class="p">):</span>
            <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">tube_diameter</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">tube_wall_thickness</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">plate_thickness</span><span class="p">)</span>
    <span class="n">half_volume_before_fillet</span> <span class="o">=</span> <span class="n">heat_exchanger</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">volume</span>
    <span class="c1"># Simulate welded tubes by adding a fillet to the outside radius of the tubes</span>
    <span class="n">fillet</span><span class="p">(</span>
        <span class="n">heat_exchanger</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span>
        <span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">GeomType</span><span class="o">.</span><span class="n">CIRCLE</span><span class="p">)</span>
        <span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">SortBy</span><span class="o">.</span><span class="n">RADIUS</span><span class="p">)</span>
        <span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="mi">2</span> <span class="o">*</span> <span class="n">tube_count</span> <span class="p">:</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">tube_count</span><span class="p">],</span>
        <span class="n">radius</span><span class="o">=</span><span class="n">fillet_radius</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">half_volume_after_fillet</span> <span class="o">=</span> <span class="n">heat_exchanger</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">volume</span>
    <span class="n">mirror</span><span class="p">(</span><span class="n">about</span><span class="o">=</span><span class="n">Plane</span><span class="o">.</span><span class="n">XY</span><span class="p">)</span>

<span class="n">fillet_volume</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">half_volume_after_fillet</span> <span class="o">-</span> <span class="n">half_volume_before_fillet</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">fillet_volume</span> <span class="o">-</span> <span class="mf">469.88331045553787</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-3</span>

<span class="n">show</span><span class="p">(</span><span class="n">heat_exchanger</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show</span>

<span class="n">exchanger_diameter</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">CM</span>
<span class="n">exchanger_length</span> <span class="o">=</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">CM</span>
<span class="n">plate_thickness</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">MM</span>
<span class="c1"># 149 tubes</span>
<span class="n">tube_diameter</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">MM</span>
<span class="n">tube_spacing</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">MM</span>
<span class="n">tube_wall_thickness</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">MM</span>
<span class="n">tube_extension</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">MM</span>
<span class="n">bundle_diameter</span> <span class="o">=</span> <span class="n">exchanger_diameter</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">tube_diameter</span>
<span class="n">fillet_radius</span> <span class="o">=</span> <span class="n">tube_spacing</span> <span class="o">/</span> <span class="mi">3</span>
<span class="k">assert</span> <span class="n">tube_extension</span> <span class="o">&gt;</span> <span class="n">fillet_radius</span>

<span class="c1"># Build the heat exchanger</span>
<span class="n">tube_locations</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">l</span>
    <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">HexLocations</span><span class="p">(</span>
        <span class="n">radius</span><span class="o">=</span><span class="p">(</span><span class="n">tube_diameter</span> <span class="o">+</span> <span class="n">tube_spacing</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">x_count</span><span class="o">=</span><span class="n">exchanger_diameter</span> <span class="o">//</span> <span class="n">tube_diameter</span><span class="p">,</span>
        <span class="n">y_count</span><span class="o">=</span><span class="n">exchanger_diameter</span> <span class="o">//</span> <span class="n">tube_diameter</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">l</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">length</span> <span class="o">&lt;</span> <span class="n">bundle_diameter</span> <span class="o">/</span> <span class="mi">2</span>
<span class="p">]</span>

<span class="n">ring</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="n">tube_diameter</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">Circle</span><span class="p">(</span><span class="n">tube_diameter</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">tube_wall_thickness</span><span class="p">)</span>
<span class="n">tube_plan</span> <span class="o">=</span> <span class="n">Sketch</span><span class="p">()</span> <span class="o">+</span> <span class="n">tube_locations</span> <span class="o">*</span> <span class="n">ring</span>

<span class="n">heat_exchanger</span> <span class="o">=</span> <span class="n">extrude</span><span class="p">(</span><span class="n">tube_plan</span><span class="p">,</span> <span class="n">exchanger_length</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">plate_plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span>
    <span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">exchanger_length</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">tube_extension</span> <span class="o">-</span> <span class="n">plate_thickness</span><span class="p">),</span>
    <span class="n">z_dir</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">plate</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">exchanger_diameter</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">tube_locations</span> <span class="o">*</span> <span class="n">Circle</span><span class="p">(</span>
    <span class="n">radius</span><span class="o">=</span><span class="n">tube_diameter</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">tube_wall_thickness</span>
<span class="p">)</span>

<span class="n">heat_exchanger</span> <span class="o">+=</span> <span class="n">extrude</span><span class="p">(</span><span class="n">plate_plane</span> <span class="o">*</span> <span class="n">plate</span><span class="p">,</span> <span class="n">plate_thickness</span><span class="p">)</span>
<span class="n">edges</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">heat_exchanger</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span>
    <span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">GeomType</span><span class="o">.</span><span class="n">CIRCLE</span><span class="p">)</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">(</span><span class="n">SortBy</span><span class="o">.</span><span class="n">RADIUS</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
    <span class="o">.</span><span class="n">group_by</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
<span class="p">)</span>
<span class="n">half_volume_before_fillet</span> <span class="o">=</span> <span class="n">heat_exchanger</span><span class="o">.</span><span class="n">volume</span>
<span class="n">heat_exchanger</span> <span class="o">=</span> <span class="n">fillet</span><span class="p">(</span><span class="n">edges</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">fillet_radius</span><span class="p">)</span>
<span class="n">half_volume_after_fillet</span> <span class="o">=</span> <span class="n">heat_exchanger</span><span class="o">.</span><span class="n">volume</span>
<span class="n">heat_exchanger</span> <span class="o">+=</span> <span class="n">mirror</span><span class="p">(</span><span class="n">heat_exchanger</span><span class="p">,</span> <span class="n">Plane</span><span class="o">.</span><span class="n">XY</span><span class="p">)</span>

<span class="n">fillet_volume</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="n">half_volume_after_fillet</span> <span class="o">-</span> <span class="n">half_volume_before_fillet</span><span class="p">)</span>
<span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">fillet_volume</span> <span class="o">-</span> <span class="mf">469.88331045553787</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-3</span>

<span class="n">show</span><span class="p">(</span><span class="n">heat_exchanger</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><p>This example creates a model of a parametric heat exchanger core. The positions
of the tubes are defined with <a class="hxr-hoverxref hxr-tooltip reference internal" href="builder_api_reference.html#build_common.HexLocations" title="build_common.HexLocations"><code class="xref py py-class docutils literal notranslate"><span class="pre">HexLocations</span></code></a> and further
limited to fit within the circular end caps. The ends of the tubes are filleted
to the end plates to simulate welding.</p>
</section>
<section id="key-cap">
<span id="id4"></span><h2>Key Cap<a class="headerlink" href="#key-cap" title="Link to this heading"></a></h2>
<img alt="_images/key_cap.png" class="align-center" src="_images/key_cap.png" />
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">key_cap</span><span class="p">:</span>
    <span class="c1"># Start with the plan of the key cap and extrude it</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">plan</span><span class="p">:</span>
        <span class="n">Rectangle</span><span class="p">(</span><span class="mi">18</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">18</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mi">10</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">taper</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
    <span class="c1"># Create a dished top</span>
    <span class="k">with</span> <span class="n">Locations</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">47</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)):</span>
        <span class="n">Sphere</span><span class="p">(</span><span class="mi">40</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="c1"># Fillet all the edges except the bottom</span>
    <span class="n">fillet</span><span class="p">(</span>
        <span class="n">key_cap</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by_position</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">inclusive</span><span class="o">=</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)),</span>
        <span class="n">radius</span><span class="o">=</span><span class="mi">1</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># Hollow out the key by subtracting a scaled version</span>
    <span class="n">scale</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">(</span><span class="mf">0.925</span><span class="p">,</span> <span class="mf">0.925</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">),</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>

    <span class="c1"># Add supporting ribs while leaving room for switch activation</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">MM</span><span class="p">))):</span>
        <span class="n">Rectangle</span><span class="p">(</span><span class="mi">15</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>
        <span class="n">Rectangle</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">15</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>
        <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mf">5.5</span> <span class="o">*</span> <span class="n">MM</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="c1"># Extrude the mount and ribs to the key cap underside</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">until</span><span class="o">=</span><span class="n">Until</span><span class="o">.</span><span class="n">NEXT</span><span class="p">)</span>
    <span class="c1"># Find the face on the bottom of the ribs to build onto</span>
    <span class="n">rib_bottom</span> <span class="o">=</span> <span class="n">key_cap</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by_position</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="c1"># Add the switch socket</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">rib_bottom</span><span class="p">)</span> <span class="k">as</span> <span class="n">cruciform</span><span class="p">:</span>
        <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mf">5.5</span> <span class="o">*</span> <span class="n">MM</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">Rectangle</span><span class="p">(</span><span class="mf">4.1</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mf">1.17</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
        <span class="n">Rectangle</span><span class="p">(</span><span class="mf">1.17</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mf">4.1</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mf">3.5</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">ADD</span><span class="p">)</span>

<span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">key_cap</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">volume</span> <span class="o">-</span> <span class="mf">644.8900473617498</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1e-3</span>

<span class="n">show</span><span class="p">(</span><span class="n">key_cap</span><span class="p">,</span> <span class="n">alphas</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">])</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Taper Extrude and Extrude to &quot;next&quot; while creating a Cherry MX key cap</span>
<span class="c1"># See: https://www.cherrymx.de/en/dev.html</span>

<span class="n">plan</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="mi">18</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">18</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>
<span class="n">key_cap</span> <span class="o">=</span> <span class="n">extrude</span><span class="p">(</span><span class="n">plan</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mi">10</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">taper</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>

<span class="c1"># Create a dished top</span>
<span class="n">key_cap</span> <span class="o">-=</span> <span class="n">Location</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">47</span> <span class="o">*</span> <span class="n">MM</span><span class="p">),</span> <span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">*</span> <span class="n">Sphere</span><span class="p">(</span><span class="mi">40</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>

<span class="c1"># Fillet all the edges except the bottom</span>
<span class="n">key_cap</span> <span class="o">=</span> <span class="n">fillet</span><span class="p">(</span>
    <span class="n">key_cap</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by_position</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">inclusive</span><span class="o">=</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)),</span>
    <span class="n">radius</span><span class="o">=</span><span class="mi">1</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Hollow out the key by subtracting a scaled version</span>
<span class="n">key_cap</span> <span class="o">-=</span> <span class="n">scale</span><span class="p">(</span><span class="n">key_cap</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.925</span><span class="p">,</span> <span class="mf">0.925</span><span class="p">,</span> <span class="mf">0.85</span><span class="p">))</span>


<span class="c1"># Add supporting ribs while leaving room for switch activation</span>
<span class="n">ribs</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="mf">17.5</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>
<span class="n">ribs</span> <span class="o">+=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mf">17.5</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>
<span class="n">ribs</span> <span class="o">+=</span> <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mf">5.51</span> <span class="o">*</span> <span class="n">MM</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1"># Extrude the mount and ribs to the key cap underside</span>
<span class="n">key_cap</span> <span class="o">+=</span> <span class="n">extrude</span><span class="p">(</span><span class="n">Pos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span> <span class="o">*</span> <span class="n">ribs</span><span class="p">,</span> <span class="n">until</span><span class="o">=</span><span class="n">Until</span><span class="o">.</span><span class="n">NEXT</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">key_cap</span><span class="p">)</span>


<span class="c1"># Find the face on the bottom of the ribs to build onto</span>
<span class="n">rib_bottom</span> <span class="o">=</span> <span class="n">key_cap</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by_position</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Add the switch socket</span>
<span class="n">socket</span> <span class="o">=</span> <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="mf">5.5</span> <span class="o">*</span> <span class="n">MM</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">socket</span> <span class="o">-=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="mf">4.1</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mf">1.17</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>
<span class="n">socket</span> <span class="o">-=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="mf">1.17</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mf">4.1</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>
<span class="n">key_cap</span> <span class="o">+=</span> <span class="n">extrude</span><span class="p">(</span><span class="n">Plane</span><span class="p">(</span><span class="n">rib_bottom</span><span class="p">)</span> <span class="o">*</span> <span class="n">socket</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mf">3.5</span> <span class="o">*</span> <span class="n">MM</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">key_cap</span><span class="p">,</span> <span class="n">alphas</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">])</span>
</pre></div>
</div>
</div>
</details><p>This example demonstrates the design of a Cherry MX key cap by using
extrude with a taper and extrude until next.</p>
</section>
<section id="maker-coin">
<span id="id5"></span><h2>Maker Coin<a class="headerlink" href="#maker-coin" title="Link to this heading"></a></h2>
<img alt="_images/maker_coin.png" class="align-center" src="_images/maker_coin.png" />
<p>This example creates the maker coin as defined by Angus on the Maker’s Muse
YouTube channel. There are two key features:</p>
<ol class="arabic simple">
<li><p>the use of <a class="hxr-hoverxref hxr-tooltip reference internal" href="objects.html#objects_curve.DoubleTangentArc" title="objects_curve.DoubleTangentArc"><code class="xref py py-class docutils literal notranslate"><span class="pre">DoubleTangentArc</span></code></a> to create a smooth
transition from the central dish to the outside arc, and</p></li>
<li><p>embossing the text into the top of the coin not just as a simple
extrude but from a projection which results in text with even depth.</p></li>
</ol>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Coin Parameters</span>
<span class="n">diameter</span><span class="p">,</span> <span class="n">thickness</span> <span class="o">=</span> <span class="mi">50</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">MM</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">maker_coin</span><span class="p">:</span>
    <span class="c1"># On XZ plane draw the profile of half the coin</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="o">.</span><span class="n">XZ</span><span class="p">)</span> <span class="k">as</span> <span class="n">profile</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">BuildLine</span><span class="p">()</span> <span class="k">as</span> <span class="n">outline</span><span class="p">:</span>
            <span class="n">l1</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="n">thickness</span> <span class="o">*</span> <span class="mf">0.6</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">((</span><span class="n">diameter</span> <span class="o">-</span> <span class="n">thickness</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="n">l2</span> <span class="o">=</span> <span class="n">JernArc</span><span class="p">(</span>
                <span class="n">start</span><span class="o">=</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="n">l1</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">thickness</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">arc_size</span><span class="o">=</span><span class="mi">300</span>
            <span class="p">)</span>  <span class="c1"># extend the arc beyond the intersection but not closed</span>
            <span class="n">l3</span> <span class="o">=</span> <span class="n">DoubleTangentArc</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">other</span><span class="o">=</span><span class="n">l2</span><span class="p">)</span>
        <span class="n">make_face</span><span class="p">()</span>  <span class="c1"># make it a 2D shape</span>
    <span class="n">revolve</span><span class="p">()</span>  <span class="c1"># revolve 360°</span>

    <span class="c1"># Pattern the detents around the coin</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">detents</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">PolarLocations</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="p">(</span><span class="n">diameter</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">8</span><span class="p">):</span>
            <span class="n">Circle</span><span class="p">(</span><span class="n">thickness</span> <span class="o">*</span> <span class="mf">1.4</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">thickness</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>  <span class="c1"># cut away the detents</span>

    <span class="n">fillet</span><span class="p">(</span><span class="n">maker_coin</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">Select</span><span class="o">.</span><span class="n">NEW</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>  <span class="c1"># fillet the cut edges</span>

    <span class="c1"># Add an embossed label</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="o">.</span><span class="n">XY</span><span class="o">.</span><span class="n">offset</span><span class="p">(</span><span class="n">thickness</span><span class="p">))</span> <span class="k">as</span> <span class="n">label</span><span class="p">:</span>  <span class="c1"># above coin</span>
        <span class="n">Text</span><span class="p">(</span><span class="s2">&quot;OS&quot;</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
    <span class="n">project</span><span class="p">()</span>  <span class="c1"># label on top of coin</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=-</span><span class="n">thickness</span> <span class="o">/</span> <span class="mi">5</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>  <span class="c1"># emboss label</span>

<span class="n">show</span><span class="p">(</span><span class="n">maker_coin</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details></section>
<section id="multi-sketch-loft">
<span id="id6"></span><h2>Multi-Sketch Loft<a class="headerlink" href="#multi-sketch-loft" title="Link to this heading"></a></h2>
<img alt="_images/loft.png" class="align-center" src="_images/loft.png" />
<p>This example demonstrates lofting a set of sketches, selecting
the top and bottom by type, and shelling.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">pi</span><span class="p">,</span> <span class="n">sin</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">art</span><span class="p">:</span>
    <span class="n">slice_count</span> <span class="o">=</span> <span class="mi">10</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">slice_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">3</span><span class="p">),</span> <span class="n">z_dir</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span> <span class="k">as</span> <span class="nb">slice</span><span class="p">:</span>
            <span class="n">Circle</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="n">slice_count</span><span class="p">)</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">loft</span><span class="p">()</span>
    <span class="n">top_bottom</span> <span class="o">=</span> <span class="n">art</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">GeomType</span><span class="o">.</span><span class="n">PLANE</span><span class="p">)</span>
    <span class="n">offset</span><span class="p">(</span><span class="n">openings</span><span class="o">=</span><span class="n">top_bottom</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">want</span> <span class="o">=</span> <span class="mf">1306.3405290344635</span>
<span class="n">got</span> <span class="o">=</span> <span class="n">art</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">volume</span>
<span class="n">delta</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">got</span> <span class="o">-</span> <span class="n">want</span><span class="p">)</span>
<span class="n">tolerance</span> <span class="o">=</span> <span class="n">want</span> <span class="o">*</span> <span class="mf">1e-5</span>
<span class="k">assert</span> <span class="n">delta</span> <span class="o">&lt;</span> <span class="n">tolerance</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">delta</span><span class="si">=}</span><span class="s2"> is greater than </span><span class="si">{</span><span class="n">tolerance</span><span class="si">=}</span><span class="s2">; </span><span class="si">{</span><span class="n">got</span><span class="si">=}</span><span class="s2">, </span><span class="si">{</span><span class="n">want</span><span class="si">=}</span><span class="s2">&quot;</span>

<span class="n">show</span><span class="p">(</span><span class="n">art</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;art&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">pi</span><span class="p">,</span> <span class="n">sin</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show</span>

<span class="n">slice_count</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">art</span> <span class="o">=</span> <span class="n">Sketch</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">slice_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">plane</span> <span class="o">=</span> <span class="n">Plane</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">3</span><span class="p">),</span> <span class="n">z_dir</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
    <span class="n">art</span> <span class="o">+=</span> <span class="n">plane</span> <span class="o">*</span> <span class="n">Circle</span><span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="n">pi</span> <span class="o">/</span> <span class="n">slice_count</span><span class="p">)</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span>

<span class="n">art</span> <span class="o">=</span> <span class="n">loft</span><span class="p">(</span><span class="n">art</span><span class="p">)</span>
<span class="n">top_bottom</span> <span class="o">=</span> <span class="n">art</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">GeomType</span><span class="o">.</span><span class="n">PLANE</span><span class="p">)</span>
<span class="n">art</span> <span class="o">=</span> <span class="n">offset</span><span class="p">(</span><span class="n">art</span><span class="p">,</span> <span class="n">openings</span><span class="o">=</span><span class="n">top_bottom</span><span class="p">,</span> <span class="n">amount</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">art</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;art&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</details></section>
<section id="peg-board-hook">
<span id="id7"></span><h2>Peg Board Hook<a class="headerlink" href="#peg-board-hook" title="Link to this heading"></a></h2>
<img alt="_images/peg_board_hook.png" class="align-center" src="_images/peg_board_hook.png" />
<p>This script creates a a J-shaped pegboard hook. These hooks are commonly used for
organizing tools in garages, workshops, or other spaces where tools and equipment
need to be stored neatly and accessibly. The hook is created by defining a complex
path and then sweeping it to define the hook. The sides of the hook are flattened
to aid 3D printing.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show</span>

<span class="n">pegd</span> <span class="o">=</span> <span class="mf">6.35</span> <span class="o">+</span> <span class="mf">0.1</span>  <span class="c1"># mm ~0.25inch</span>
<span class="n">c2c</span> <span class="o">=</span> <span class="mf">25.4</span>  <span class="c1"># mm 1.0inch</span>
<span class="n">arcd</span> <span class="o">=</span> <span class="mf">7.2</span>
<span class="n">both</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">topx</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">midx</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">maind</span> <span class="o">=</span> <span class="mf">0.82</span> <span class="o">*</span> <span class="n">pegd</span>
<span class="n">midd</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">pegd</span>
<span class="n">hookd</span> <span class="o">=</span> <span class="mi">23</span>
<span class="n">hookx</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">splitz</span> <span class="o">=</span> <span class="n">maind</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mf">0.1</span>
<span class="n">topangs</span> <span class="o">=</span> <span class="mi">70</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">mainp</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">BuildLine</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">PRIVATE</span><span class="p">)</span> <span class="k">as</span> <span class="n">sprof</span><span class="p">:</span>
        <span class="n">l1</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="o">-</span><span class="n">both</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">c2c</span> <span class="o">-</span> <span class="n">arcd</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="n">l2</span> <span class="o">=</span> <span class="n">JernArc</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="n">l1</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">arcd</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">arc_size</span><span class="o">=</span><span class="n">topangs</span><span class="p">)</span>
        <span class="n">l3</span> <span class="o">=</span> <span class="n">PolarLine</span><span class="p">(</span>
            <span class="n">start</span><span class="o">=</span><span class="n">l2</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">length</span><span class="o">=</span><span class="n">topx</span><span class="p">,</span>
            <span class="n">direction</span><span class="o">=</span><span class="n">l2</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">l4</span> <span class="o">=</span> <span class="n">JernArc</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">l3</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="n">l3</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">arcd</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">arc_size</span><span class="o">=-</span><span class="n">topangs</span><span class="p">)</span>
        <span class="n">l5</span> <span class="o">=</span> <span class="n">PolarLine</span><span class="p">(</span>
            <span class="n">start</span><span class="o">=</span><span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">length</span><span class="o">=</span><span class="n">topx</span><span class="p">,</span>
            <span class="n">direction</span><span class="o">=</span><span class="n">l4</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">l6</span> <span class="o">=</span> <span class="n">JernArc</span><span class="p">(</span>
            <span class="n">start</span><span class="o">=</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="p">(</span><span class="n">l1</span> <span class="o">%</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reverse</span><span class="p">(),</span> <span class="n">radius</span><span class="o">=</span><span class="n">hookd</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">arc_size</span><span class="o">=</span><span class="mi">170</span>
        <span class="p">)</span>
        <span class="n">l7</span> <span class="o">=</span> <span class="n">PolarLine</span><span class="p">(</span>
            <span class="n">start</span><span class="o">=</span><span class="n">l6</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
            <span class="n">length</span><span class="o">=</span><span class="n">hookx</span><span class="p">,</span>
            <span class="n">direction</span><span class="o">=</span><span class="n">l6</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="o">.</span><span class="n">YZ</span><span class="p">):</span>
        <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">maind</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">sweep</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">sprof</span><span class="o">.</span><span class="n">wires</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">with</span> <span class="n">BuildLine</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">PRIVATE</span><span class="p">)</span> <span class="k">as</span> <span class="n">stub</span><span class="p">:</span>
        <span class="n">l7</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">midx</span> <span class="o">+</span> <span class="n">maind</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="o">.</span><span class="n">XZ</span><span class="p">):</span>
        <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">midd</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="n">sweep</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">stub</span><span class="o">.</span><span class="n">wires</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
    <span class="c1"># splits help keep the object 3d printable by reducing overhang</span>
    <span class="n">split</span><span class="p">(</span><span class="n">bisect_by</span><span class="o">=</span><span class="n">Plane</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">splitz</span><span class="p">)))</span>
    <span class="n">split</span><span class="p">(</span><span class="n">bisect_by</span><span class="o">=</span><span class="n">Plane</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">splitz</span><span class="p">)),</span> <span class="n">keep</span><span class="o">=</span><span class="n">Keep</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">mainp</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show</span>

<span class="n">pegd</span> <span class="o">=</span> <span class="mf">6.35</span> <span class="o">+</span> <span class="mf">0.1</span>  <span class="c1"># mm ~0.25inch</span>
<span class="n">c2c</span> <span class="o">=</span> <span class="mf">25.4</span>  <span class="c1"># mm 1.0inch</span>
<span class="n">arcd</span> <span class="o">=</span> <span class="mf">7.2</span>
<span class="n">both</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">topx</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">midx</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">maind</span> <span class="o">=</span> <span class="mf">0.82</span> <span class="o">*</span> <span class="n">pegd</span>
<span class="n">midd</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">*</span> <span class="n">pegd</span>
<span class="n">hookd</span> <span class="o">=</span> <span class="mi">23</span>
<span class="n">hookx</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">splitz</span> <span class="o">=</span> <span class="n">maind</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mf">0.1</span>
<span class="n">topangs</span> <span class="o">=</span> <span class="mi">70</span>

<span class="n">l1</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="o">-</span><span class="n">both</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="n">c2c</span> <span class="o">-</span> <span class="n">arcd</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">JernArc</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="n">l1</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">arcd</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">arc_size</span><span class="o">=</span><span class="n">topangs</span><span class="p">)</span>
<span class="n">l3</span> <span class="o">=</span> <span class="n">PolarLine</span><span class="p">(</span>
    <span class="n">start</span><span class="o">=</span><span class="n">l2</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">length</span><span class="o">=</span><span class="n">topx</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="n">l2</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">l4</span> <span class="o">=</span> <span class="n">JernArc</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">l3</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="n">l3</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">arcd</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">arc_size</span><span class="o">=-</span><span class="n">topangs</span><span class="p">)</span>
<span class="n">l5</span> <span class="o">=</span> <span class="n">PolarLine</span><span class="p">(</span>
    <span class="n">start</span><span class="o">=</span><span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">length</span><span class="o">=</span><span class="n">topx</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="n">l4</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">l6</span> <span class="o">=</span> <span class="n">JernArc</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tangent</span><span class="o">=</span><span class="p">(</span><span class="n">l1</span> <span class="o">%</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reverse</span><span class="p">(),</span> <span class="n">radius</span><span class="o">=</span><span class="n">hookd</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">arc_size</span><span class="o">=</span><span class="mi">170</span><span class="p">)</span>
<span class="n">l7</span> <span class="o">=</span> <span class="n">PolarLine</span><span class="p">(</span>
    <span class="n">start</span><span class="o">=</span><span class="n">l6</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">length</span><span class="o">=</span><span class="n">hookx</span><span class="p">,</span>
    <span class="n">direction</span><span class="o">=</span><span class="n">l6</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">sprof</span> <span class="o">=</span> <span class="n">Curve</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">l1</span><span class="p">,</span> <span class="n">l2</span><span class="p">,</span> <span class="n">l3</span><span class="p">,</span> <span class="n">l4</span><span class="p">,</span> <span class="n">l5</span><span class="p">,</span> <span class="n">l6</span><span class="p">,</span> <span class="n">l7</span><span class="p">)</span>
<span class="n">wire</span> <span class="o">=</span> <span class="n">Wire</span><span class="p">(</span><span class="n">sprof</span><span class="o">.</span><span class="n">edges</span><span class="p">())</span>  <span class="c1">#  TODO sprof.wires() fails</span>
<span class="n">mainp</span> <span class="o">=</span> <span class="n">sweep</span><span class="p">(</span><span class="n">Plane</span><span class="o">.</span><span class="n">YZ</span> <span class="o">*</span> <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">maind</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">path</span><span class="o">=</span><span class="n">wire</span><span class="p">)</span>

<span class="n">stub</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">midx</span> <span class="o">+</span> <span class="n">maind</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">mainp</span> <span class="o">+=</span> <span class="n">sweep</span><span class="p">(</span><span class="n">Plane</span><span class="o">.</span><span class="n">XZ</span> <span class="o">*</span> <span class="n">Circle</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="n">midd</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="n">path</span><span class="o">=</span><span class="n">stub</span><span class="p">)</span>


<span class="c1"># splits help keep the object 3d printable by reducing overhang</span>
<span class="n">mainp</span> <span class="o">=</span> <span class="n">split</span><span class="p">(</span><span class="n">mainp</span><span class="p">,</span> <span class="n">Plane</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">splitz</span><span class="p">)))</span>
<span class="n">mainp</span> <span class="o">=</span> <span class="n">split</span><span class="p">(</span><span class="n">mainp</span><span class="p">,</span> <span class="n">Plane</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">splitz</span><span class="p">)),</span> <span class="n">keep</span><span class="o">=</span><span class="n">Keep</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">)</span>

<span class="n">show</span><span class="p">(</span><span class="n">mainp</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details></section>
<section id="platonic-solids">
<span id="id8"></span><h2>Platonic Solids<a class="headerlink" href="#platonic-solids" title="Link to this heading"></a></h2>
<img alt="_images/platonic_solids.png" class="align-center" src="_images/platonic_solids.png" />
<p>This example creates a custom Part object PlatonicSolid.</p>
<p>Platonic solids are five three-dimensional shapes that are highly symmetrical,
known since antiquity and named after the ancient Greek philosopher Plato.
These solids are unique because their faces are congruent regular polygons,
with the same number of faces meeting at each vertex. The five Platonic solids
are the tetrahedron (4 triangular faces), cube (6 square faces), octahedron
(8 triangular faces), dodecahedron (12 pentagonal faces), and icosahedron
(20 triangular faces). Each solid represents a unique way in which identical
polygons can be arranged in three dimensions to form a convex polyhedron,
embodying ideals of symmetry and balance.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">math</span><span class="w"> </span><span class="kn">import</span> <span class="n">sqrt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Union</span><span class="p">,</span> <span class="n">Literal</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.spatial</span><span class="w"> </span><span class="kn">import</span> <span class="n">ConvexHull</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show</span>

<span class="n">PHI</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span>  <span class="c1"># The Golden Ratio</span>


<span class="k">class</span><span class="w"> </span><span class="nc">PlatonicSolid</span><span class="p">(</span><span class="n">BasePartObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Part Object: Platonic Solid</span>

<span class="sd">    Create one of the five convex Platonic solids.</span>

<span class="sd">    Args:</span>
<span class="sd">        face_count (Literal[4,6,8,12,20]): number of faces</span>
<span class="sd">        diameter (float): double distance to vertices, i.e. maximum size</span>
<span class="sd">        rotation (RotationLike, optional): angles to rotate about axes. Defaults to (0, 0, 0).</span>
<span class="sd">        align (Union[None, Align, tuple[Align, Align, Align]], optional): align min, center,</span>
<span class="sd">            or max of object. Defaults to None.</span>
<span class="sd">        mode (Mode, optional): combine mode. Defaults to Mode.ADD.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tetrahedron_vertices</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>

    <span class="n">cube_vertices</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>

    <span class="n">octahedron_vertices</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="o">+</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="o">+</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="p">)</span>

    <span class="n">dodecahedron_vertices</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="o">+</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">/</span> <span class="n">PHI</span><span class="p">,</span> <span class="n">j</span> <span class="o">*</span> <span class="n">PHI</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="o">+</span> <span class="p">[(</span><span class="n">i</span> <span class="o">/</span> <span class="n">PHI</span><span class="p">,</span> <span class="n">j</span> <span class="o">*</span> <span class="n">PHI</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="o">+</span> <span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">PHI</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">j</span> <span class="o">/</span> <span class="n">PHI</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="p">)</span>

    <span class="n">icosahedron_vertices</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">*</span> <span class="n">PHI</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="o">+</span> <span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">*</span> <span class="n">PHI</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
        <span class="o">+</span> <span class="p">[(</span><span class="n">i</span> <span class="o">*</span> <span class="n">PHI</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
    <span class="p">)</span>

    <span class="n">vertices_lookup</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">4</span><span class="p">:</span> <span class="n">tetrahedron_vertices</span><span class="p">,</span>
        <span class="mi">6</span><span class="p">:</span> <span class="n">cube_vertices</span><span class="p">,</span>
        <span class="mi">8</span><span class="p">:</span> <span class="n">octahedron_vertices</span><span class="p">,</span>
        <span class="mi">12</span><span class="p">:</span> <span class="n">dodecahedron_vertices</span><span class="p">,</span>
        <span class="mi">20</span><span class="p">:</span> <span class="n">icosahedron_vertices</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">_applies_to</span> <span class="o">=</span> <span class="p">[</span><span class="n">BuildPart</span><span class="o">.</span><span class="n">_tag</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">face_count</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">20</span><span class="p">],</span>
        <span class="n">diameter</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">rotation</span><span class="p">:</span> <span class="n">RotationLike</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">align</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Align</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Align</span><span class="p">,</span> <span class="n">Align</span><span class="p">,</span> <span class="n">Align</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">Mode</span> <span class="o">=</span> <span class="n">Mode</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">platonic_vertices</span> <span class="o">=</span> <span class="n">PlatonicSolid</span><span class="o">.</span><span class="n">vertices_lookup</span><span class="p">[</span><span class="n">face_count</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;face_count must be one of 4, 6, 8, 12, or 20 not </span><span class="si">{</span><span class="n">face_count</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Create a convex hull from the vertices</span>
        <span class="n">hull</span> <span class="o">=</span> <span class="n">ConvexHull</span><span class="p">(</span><span class="n">platonic_vertices</span><span class="p">)</span><span class="o">.</span><span class="n">simplices</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="c1"># Create faces from the vertex indices</span>
        <span class="n">platonic_faces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">face_vertex_indices</span> <span class="ow">in</span> <span class="n">hull</span><span class="p">:</span>
            <span class="n">corner_vertices</span> <span class="o">=</span> <span class="p">[</span><span class="n">platonic_vertices</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">face_vertex_indices</span><span class="p">]</span>
            <span class="n">platonic_faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Face</span><span class="p">(</span><span class="n">Wire</span><span class="o">.</span><span class="n">make_polygon</span><span class="p">(</span><span class="n">corner_vertices</span><span class="p">)))</span>

        <span class="c1"># Create the solid from the Faces</span>
        <span class="n">platonic_solid</span> <span class="o">=</span> <span class="n">Solid</span><span class="p">(</span><span class="n">Shell</span><span class="p">(</span><span class="n">platonic_faces</span><span class="p">))</span><span class="o">.</span><span class="n">clean</span><span class="p">()</span>

        <span class="c1"># By definition, all vertices are the same distance from the origin so</span>
        <span class="c1"># scale proportionally to this distance</span>
        <span class="n">platonic_solid</span> <span class="o">=</span> <span class="n">platonic_solid</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span>
            <span class="p">(</span><span class="n">diameter</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">Vector</span><span class="p">(</span><span class="n">platonic_solid</span><span class="o">.</span><span class="n">vertices</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">length</span>
        <span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">part</span><span class="o">=</span><span class="n">platonic_solid</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">align</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>


<span class="n">solids</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">Rot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">72</span> <span class="o">*</span> <span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="n">Pos</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">PlatonicSolid</span><span class="p">(</span><span class="n">faces</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">faces</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>
<span class="p">]</span>
<span class="n">show</span><span class="p">(</span><span class="n">solids</span><span class="p">)</span>

</pre></div>
</div>
</div>
</details></section>
<section id="playing-cards">
<span id="id9"></span><h2>Playing Cards<a class="headerlink" href="#playing-cards" title="Link to this heading"></a></h2>
<img alt="_images/playing_cards.png" class="align-center" src="_images/playing_cards.png" />
<p>This example creates a customs Sketch objects: Club, Spade, Heart, Diamond,
and PlayingCard in addition to a two part playing card box which has suit
cutouts in the lid. The four suits are created with Bézier curves that were
imported as code from an SVG file and modified to the code found here.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show_object</span>


<span class="c1"># [Club]</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Club</span><span class="p">(</span><span class="n">BaseSketchObject</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">rotation</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">align</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Align</span><span class="p">,</span> <span class="n">Align</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">),</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">Mode</span> <span class="o">=</span> <span class="n">Mode</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">club</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">BuildLine</span><span class="p">():</span>
                <span class="n">l0</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">188</span><span class="p">),</span> <span class="p">(</span><span class="mi">76</span><span class="p">,</span> <span class="o">-</span><span class="mi">188</span><span class="p">))</span>
                <span class="n">b0</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">(</span><span class="n">l0</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">61</span><span class="p">,</span> <span class="o">-</span><span class="mi">185</span><span class="p">),</span> <span class="p">(</span><span class="mi">33</span><span class="p">,</span> <span class="o">-</span><span class="mi">173</span><span class="p">),</span> <span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="o">-</span><span class="mi">81</span><span class="p">))</span>
                <span class="n">b1</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">(</span><span class="n">b0</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">49</span><span class="p">,</span> <span class="o">-</span><span class="mi">128</span><span class="p">),</span> <span class="p">(</span><span class="mi">146</span><span class="p">,</span> <span class="o">-</span><span class="mi">145</span><span class="p">),</span> <span class="p">(</span><span class="mi">167</span><span class="p">,</span> <span class="o">-</span><span class="mi">67</span><span class="p">))</span>
                <span class="n">b2</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">(</span><span class="n">b1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">187</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span> <span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="mi">52</span><span class="p">),</span> <span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
                <span class="n">b3</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">(</span><span class="n">b2</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">92</span><span class="p">,</span> <span class="mi">57</span><span class="p">),</span> <span class="p">(</span><span class="mi">113</span><span class="p">,</span> <span class="mi">188</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">188</span><span class="p">))</span>
                <span class="n">mirror</span><span class="p">(</span><span class="n">about</span><span class="o">=</span><span class="n">Plane</span><span class="o">.</span><span class="n">YZ</span><span class="p">)</span>
            <span class="n">make_face</span><span class="p">()</span>
            <span class="n">scale</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">height</span> <span class="o">/</span> <span class="n">club</span><span class="o">.</span><span class="n">sketch</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">club</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">align</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>


<span class="c1"># [Club]</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Spade</span><span class="p">(</span><span class="n">BaseSketchObject</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">rotation</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">align</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Align</span><span class="p">,</span> <span class="n">Align</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">),</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">Mode</span> <span class="o">=</span> <span class="n">Mode</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">spade</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">BuildLine</span><span class="p">():</span>
                <span class="n">b0</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">198</span><span class="p">),</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">190</span><span class="p">),</span> <span class="p">(</span><span class="mi">41</span><span class="p">,</span> <span class="mi">127</span><span class="p">),</span> <span class="p">(</span><span class="mi">112</span><span class="p">,</span> <span class="mi">61</span><span class="p">))</span>
                <span class="n">b1</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">(</span><span class="n">b0</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">242</span><span class="p">,</span> <span class="o">-</span><span class="mi">72</span><span class="p">),</span> <span class="p">(</span><span class="mi">114</span><span class="p">,</span> <span class="o">-</span><span class="mi">168</span><span class="p">),</span> <span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="o">-</span><span class="mi">105</span><span class="p">))</span>
                <span class="n">b2</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">(</span><span class="n">b1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">31</span><span class="p">,</span> <span class="o">-</span><span class="mi">174</span><span class="p">),</span> <span class="p">(</span><span class="mi">42</span><span class="p">,</span> <span class="o">-</span><span class="mi">179</span><span class="p">),</span> <span class="p">(</span><span class="mi">53</span><span class="p">,</span> <span class="o">-</span><span class="mi">198</span><span class="p">))</span>
                <span class="n">l0</span> <span class="o">=</span> <span class="n">Line</span><span class="p">(</span><span class="n">b2</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">198</span><span class="p">))</span>
                <span class="n">mirror</span><span class="p">(</span><span class="n">about</span><span class="o">=</span><span class="n">Plane</span><span class="o">.</span><span class="n">YZ</span><span class="p">)</span>
            <span class="n">make_face</span><span class="p">()</span>
            <span class="n">scale</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">height</span> <span class="o">/</span> <span class="n">spade</span><span class="o">.</span><span class="n">sketch</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">spade</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">align</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Heart</span><span class="p">(</span><span class="n">BaseSketchObject</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">rotation</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">align</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Align</span><span class="p">,</span> <span class="n">Align</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">),</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">Mode</span> <span class="o">=</span> <span class="n">Mode</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">heart</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">BuildLine</span><span class="p">():</span>
                <span class="n">b1</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">146</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">169</span><span class="p">),</span> <span class="p">(</span><span class="mi">67</span><span class="p">,</span> <span class="mi">198</span><span class="p">),</span> <span class="p">(</span><span class="mi">97</span><span class="p">,</span> <span class="mi">198</span><span class="p">))</span>
                <span class="n">b2</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">(</span><span class="n">b1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">125</span><span class="p">,</span> <span class="mi">198</span><span class="p">),</span> <span class="p">(</span><span class="mi">151</span><span class="p">,</span> <span class="mi">186</span><span class="p">),</span> <span class="p">(</span><span class="mi">168</span><span class="p">,</span> <span class="mi">167</span><span class="p">))</span>
                <span class="n">b3</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">(</span><span class="n">b2</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">197</span><span class="p">,</span> <span class="mi">133</span><span class="p">),</span> <span class="p">(</span><span class="mi">194</span><span class="p">,</span> <span class="mi">88</span><span class="p">),</span> <span class="p">(</span><span class="mi">158</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span>
                <span class="n">b4</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">(</span><span class="n">b3</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">126</span><span class="p">,</span> <span class="o">-</span><span class="mi">13</span><span class="p">),</span> <span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="o">-</span><span class="mi">48</span><span class="p">),</span> <span class="p">(</span><span class="mi">62</span><span class="p">,</span> <span class="o">-</span><span class="mi">95</span><span class="p">))</span>
                <span class="n">b5</span> <span class="o">=</span> <span class="n">Bezier</span><span class="p">(</span><span class="n">b4</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="o">-</span><span class="mi">128</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">198</span><span class="p">))</span>
                <span class="n">mirror</span><span class="p">(</span><span class="n">about</span><span class="o">=</span><span class="n">Plane</span><span class="o">.</span><span class="n">YZ</span><span class="p">)</span>
            <span class="n">make_face</span><span class="p">()</span>
            <span class="n">scale</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">height</span> <span class="o">/</span> <span class="n">heart</span><span class="o">.</span><span class="n">sketch</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">heart</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">align</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Diamond</span><span class="p">(</span><span class="n">BaseSketchObject</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">rotation</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">align</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Align</span><span class="p">,</span> <span class="n">Align</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">),</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">Mode</span> <span class="o">=</span> <span class="n">Mode</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">diamond</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">BuildLine</span><span class="p">():</span>
                <span class="n">Bezier</span><span class="p">((</span><span class="mi">135</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">94</span><span class="p">,</span> <span class="mi">69</span><span class="p">),</span> <span class="p">(</span><span class="mi">47</span><span class="p">,</span> <span class="mi">134</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">198</span><span class="p">))</span>
                <span class="n">mirror</span><span class="p">(</span><span class="n">about</span><span class="o">=</span><span class="n">Plane</span><span class="o">.</span><span class="n">XZ</span><span class="p">)</span>
                <span class="n">mirror</span><span class="p">(</span><span class="n">about</span><span class="o">=</span><span class="n">Plane</span><span class="o">.</span><span class="n">YZ</span><span class="p">)</span>
            <span class="n">make_face</span><span class="p">()</span>
            <span class="n">scale</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">height</span> <span class="o">/</span> <span class="n">diamond</span><span class="o">.</span><span class="n">sketch</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="n">diamond</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">align</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>


<span class="n">card_width</span> <span class="o">=</span> <span class="mf">2.5</span> <span class="o">*</span> <span class="n">IN</span>
<span class="n">card_length</span> <span class="o">=</span> <span class="mf">3.5</span> <span class="o">*</span> <span class="n">IN</span>
<span class="n">deck</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">IN</span>
<span class="n">wall</span> <span class="o">=</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">MM</span>
<span class="n">gap</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">MM</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">box_builder</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">plan</span><span class="p">:</span>
        <span class="n">Rectangle</span><span class="p">(</span><span class="n">card_width</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">wall</span><span class="p">,</span> <span class="n">card_length</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">wall</span><span class="p">)</span>
        <span class="n">fillet</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">vertices</span><span class="p">(),</span> <span class="n">radius</span><span class="o">=</span><span class="n">card_width</span> <span class="o">/</span> <span class="mi">15</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">wall</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">box_builder</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="k">as</span> <span class="n">walls</span><span class="p">:</span>
        <span class="n">add</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">sketch</span><span class="p">)</span>
        <span class="n">offset</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span> <span class="n">amount</span><span class="o">=-</span><span class="n">wall</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">deck</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">box_builder</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="k">as</span> <span class="n">inset_walls</span><span class="p">:</span>
        <span class="n">offset</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span> <span class="n">amount</span><span class="o">=-</span><span class="p">(</span><span class="n">wall</span> <span class="o">+</span> <span class="n">gap</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">ADD</span><span class="p">)</span>
        <span class="n">offset</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span> <span class="n">amount</span><span class="o">=-</span><span class="n">wall</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">deck</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">lid_builder</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">outset_walls</span><span class="p">:</span>
        <span class="n">add</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">sketch</span><span class="p">)</span>
        <span class="n">offset</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span> <span class="n">amount</span><span class="o">=-</span><span class="p">(</span><span class="n">wall</span> <span class="o">-</span> <span class="n">gap</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">deck</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">lid_builder</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="k">as</span> <span class="n">top</span><span class="p">:</span>
        <span class="n">add</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">sketch</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">wall</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">lid_builder</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]):</span>
        <span class="n">holes</span> <span class="o">=</span> <span class="n">GridLocations</span><span class="p">(</span>
            <span class="mi">3</span> <span class="o">*</span> <span class="n">card_width</span> <span class="o">/</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">card_length</span> <span class="o">/</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span>
        <span class="p">)</span><span class="o">.</span><span class="n">local_locations</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">hole</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">holes</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">Locations</span><span class="p">(</span><span class="n">hole</span><span class="p">)</span> <span class="k">as</span> <span class="n">hole_loc</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">Heart</span><span class="p">(</span><span class="n">card_length</span> <span class="o">/</span> <span class="mi">5</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">Diamond</span><span class="p">(</span><span class="n">card_length</span> <span class="o">/</span> <span class="mi">5</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="n">Spade</span><span class="p">(</span><span class="n">card_length</span> <span class="o">/</span> <span class="mi">5</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">Club</span><span class="p">(</span><span class="n">card_length</span> <span class="o">/</span> <span class="mi">5</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=-</span><span class="n">wall</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>

<span class="n">box</span> <span class="o">=</span> <span class="n">Compound</span><span class="p">(</span>
    <span class="p">[</span><span class="n">box_builder</span><span class="o">.</span><span class="n">part</span><span class="p">,</span> <span class="n">lid_builder</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">moved</span><span class="p">(</span><span class="n">Location</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">wall</span> <span class="o">+</span> <span class="n">deck</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)))]</span>
<span class="p">)</span>
<span class="n">visible</span><span class="p">,</span> <span class="n">hidden</span> <span class="o">=</span> <span class="n">box</span><span class="o">.</span><span class="n">project_to_viewport</span><span class="p">((</span><span class="mi">70</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">,</span> <span class="mi">120</span><span class="p">))</span>
<span class="n">max_dimension</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="o">*</span><span class="n">Compound</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="n">visible</span> <span class="o">+</span> <span class="n">hidden</span><span class="p">)</span><span class="o">.</span><span class="n">bounding_box</span><span class="p">()</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
<span class="n">exporter</span> <span class="o">=</span> <span class="n">ExportSVG</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mi">100</span> <span class="o">/</span> <span class="n">max_dimension</span><span class="p">)</span>
<span class="n">exporter</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="s2">&quot;Visible&quot;</span><span class="p">)</span>
<span class="n">exporter</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="s2">&quot;Hidden&quot;</span><span class="p">,</span> <span class="n">line_color</span><span class="o">=</span><span class="p">(</span><span class="mi">99</span><span class="p">,</span> <span class="mi">99</span><span class="p">,</span> <span class="mi">99</span><span class="p">),</span> <span class="n">line_type</span><span class="o">=</span><span class="n">LineType</span><span class="o">.</span><span class="n">ISO_DOT</span><span class="p">)</span>
<span class="n">exporter</span><span class="o">.</span><span class="n">add_shape</span><span class="p">(</span><span class="n">visible</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="s2">&quot;Visible&quot;</span><span class="p">)</span>
<span class="n">exporter</span><span class="o">.</span><span class="n">add_shape</span><span class="p">(</span><span class="n">hidden</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="s2">&quot;Hidden&quot;</span><span class="p">)</span>
<span class="c1"># exporter.write(f&quot;assets/card_box.svg&quot;)</span>


<span class="k">class</span><span class="w"> </span><span class="nc">PlayingCard</span><span class="p">(</span><span class="n">BaseSketchObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;PlayingCard</span>

<span class="sd">    A standard playing card modelled as a Face.</span>

<span class="sd">    Args:</span>
<span class="sd">        rank (Literal[&#39;A&#39;, &#39;2&#39; .. &#39;10&#39;, &#39;J&#39;, &#39;Q&#39;, &#39;K&#39;]): card rank</span>
<span class="sd">        suit (Literal[&#39;Clubs&#39;, &#39;Spades&#39;, &#39;Hearts&#39;, &#39;Diamonds&#39;]): card suit</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">width</span> <span class="o">=</span> <span class="mf">2.5</span> <span class="o">*</span> <span class="n">IN</span>
    <span class="n">height</span> <span class="o">=</span> <span class="mf">3.5</span> <span class="o">*</span> <span class="n">IN</span>
    <span class="n">suits</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Clubs&quot;</span><span class="p">:</span> <span class="n">Club</span><span class="p">,</span> <span class="s2">&quot;Spades&quot;</span><span class="p">:</span> <span class="n">Spade</span><span class="p">,</span> <span class="s2">&quot;Hearts&quot;</span><span class="p">:</span> <span class="n">Heart</span><span class="p">,</span> <span class="s2">&quot;Diamonds&quot;</span><span class="p">:</span> <span class="n">Diamond</span><span class="p">}</span>
    <span class="n">ranks</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="s2">&quot;6&quot;</span><span class="p">,</span> <span class="s2">&quot;7&quot;</span><span class="p">,</span> <span class="s2">&quot;8&quot;</span><span class="p">,</span> <span class="s2">&quot;9&quot;</span><span class="p">,</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;J&quot;</span><span class="p">,</span> <span class="s2">&quot;Q&quot;</span><span class="p">,</span> <span class="s2">&quot;K&quot;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">rank</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="s2">&quot;4&quot;</span><span class="p">,</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="s2">&quot;6&quot;</span><span class="p">,</span> <span class="s2">&quot;7&quot;</span><span class="p">,</span> <span class="s2">&quot;8&quot;</span><span class="p">,</span> <span class="s2">&quot;9&quot;</span><span class="p">,</span> <span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="s2">&quot;J&quot;</span><span class="p">,</span> <span class="s2">&quot;Q&quot;</span><span class="p">,</span> <span class="s2">&quot;K&quot;</span><span class="p">],</span>
        <span class="n">suit</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;Clubs&quot;</span><span class="p">,</span> <span class="s2">&quot;Spades&quot;</span><span class="p">,</span> <span class="s2">&quot;Hearts&quot;</span><span class="p">,</span> <span class="s2">&quot;Diamonds&quot;</span><span class="p">],</span>
        <span class="n">rotation</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">align</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Align</span><span class="p">,</span> <span class="n">Align</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">),</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">Mode</span> <span class="o">=</span> <span class="n">Mode</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">playing_card</span><span class="p">:</span>
            <span class="n">Rectangle</span><span class="p">(</span>
                <span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="n">PlayingCard</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">fillet</span><span class="p">(</span><span class="n">playing_card</span><span class="o">.</span><span class="n">vertices</span><span class="p">(),</span> <span class="n">radius</span><span class="o">=</span><span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">15</span><span class="p">)</span>
            <span class="k">with</span> <span class="n">Locations</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">7</span><span class="p">,</span>
                    <span class="mi">8</span> <span class="o">*</span> <span class="n">PlayingCard</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mi">9</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">):</span>
                <span class="n">Text</span><span class="p">(</span>
                    <span class="n">txt</span><span class="o">=</span><span class="n">rank</span><span class="p">,</span>
                    <span class="n">font_size</span><span class="o">=</span><span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">7</span><span class="p">,</span>
                    <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">with</span> <span class="n">Locations</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">7</span><span class="p">,</span>
                    <span class="mi">7</span> <span class="o">*</span> <span class="n">PlayingCard</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mi">9</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">):</span>
                <span class="n">PlayingCard</span><span class="o">.</span><span class="n">suits</span><span class="p">[</span><span class="n">suit</span><span class="p">](</span>
                    <span class="n">height</span><span class="o">=</span><span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">12</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span>
                <span class="p">)</span>
            <span class="k">with</span> <span class="n">Locations</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="mi">6</span> <span class="o">*</span> <span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">7</span><span class="p">,</span>
                    <span class="mi">1</span> <span class="o">*</span> <span class="n">PlayingCard</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mi">9</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">):</span>
                <span class="n">Text</span><span class="p">(</span>
                    <span class="n">txt</span><span class="o">=</span><span class="n">rank</span><span class="p">,</span>
                    <span class="n">font_size</span><span class="o">=</span><span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">7</span><span class="p">,</span>
                    <span class="n">rotation</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span>
                    <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">with</span> <span class="n">Locations</span><span class="p">(</span>
                <span class="p">(</span>
                    <span class="mi">6</span> <span class="o">*</span> <span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">7</span><span class="p">,</span>
                    <span class="mi">2</span> <span class="o">*</span> <span class="n">PlayingCard</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mi">9</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">):</span>
                <span class="n">PlayingCard</span><span class="o">.</span><span class="n">suits</span><span class="p">[</span><span class="n">suit</span><span class="p">](</span>
                    <span class="n">height</span><span class="o">=</span><span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">12</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span>
                <span class="p">)</span>
            <span class="n">rank_int</span> <span class="o">=</span> <span class="n">PlayingCard</span><span class="o">.</span><span class="n">ranks</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">rank_int</span> <span class="o">=</span> <span class="n">rank_int</span> <span class="k">if</span> <span class="n">rank_int</span> <span class="o">&lt;</span> <span class="mi">10</span> <span class="k">else</span> <span class="mi">1</span>
            <span class="k">with</span> <span class="n">Locations</span><span class="p">((</span><span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">PlayingCard</span><span class="o">.</span><span class="n">height</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)):</span>
                <span class="n">center_radius</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">rank_int</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span> <span class="o">/</span> <span class="mf">3.5</span>
                <span class="n">suit_rotation</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">rank_int</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="o">-</span><span class="mi">90</span>
                <span class="n">suit_height</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="mf">0.00159</span> <span class="o">*</span> <span class="n">rank_int</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="mf">0.0380</span> <span class="o">*</span> <span class="n">rank_int</span> <span class="o">+</span> <span class="mf">0.37</span>
                <span class="p">)</span> <span class="o">*</span> <span class="n">PlayingCard</span><span class="o">.</span><span class="n">width</span>
                <span class="k">with</span> <span class="n">PolarLocations</span><span class="p">(</span>
                    <span class="n">radius</span><span class="o">=</span><span class="n">center_radius</span><span class="p">,</span>
                    <span class="n">count</span><span class="o">=</span><span class="n">rank_int</span><span class="p">,</span>
                    <span class="n">start_angle</span><span class="o">=</span><span class="mi">90</span> <span class="k">if</span> <span class="n">rank_int</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span>
                <span class="p">):</span>
                    <span class="n">PlayingCard</span><span class="o">.</span><span class="n">suits</span><span class="p">[</span><span class="n">suit</span><span class="p">](</span>
                        <span class="n">height</span><span class="o">=</span><span class="n">suit_height</span><span class="p">,</span>
                        <span class="n">rotation</span><span class="o">=</span><span class="n">suit_rotation</span><span class="p">,</span>
                        <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">,</span>
                    <span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">obj</span><span class="o">=</span><span class="n">playing_card</span><span class="o">.</span><span class="n">sketch</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">align</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span>
        <span class="p">)</span>


<span class="n">ace_spades</span> <span class="o">=</span> <span class="n">PlayingCard</span><span class="p">(</span><span class="n">rank</span><span class="o">=</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="n">suit</span><span class="o">=</span><span class="s2">&quot;Spades&quot;</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">)</span>
<span class="n">ace_spades</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
<span class="n">king_hearts</span> <span class="o">=</span> <span class="n">PlayingCard</span><span class="p">(</span><span class="n">rank</span><span class="o">=</span><span class="s2">&quot;K&quot;</span><span class="p">,</span> <span class="n">suit</span><span class="o">=</span><span class="s2">&quot;Hearts&quot;</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">)</span>
<span class="n">king_hearts</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
<span class="n">queen_clubs</span> <span class="o">=</span> <span class="n">PlayingCard</span><span class="p">(</span><span class="n">rank</span><span class="o">=</span><span class="s2">&quot;Q&quot;</span><span class="p">,</span> <span class="n">suit</span><span class="o">=</span><span class="s2">&quot;Clubs&quot;</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">)</span>
<span class="n">queen_clubs</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
<span class="n">jack_diamonds</span> <span class="o">=</span> <span class="n">PlayingCard</span><span class="p">(</span><span class="n">rank</span><span class="o">=</span><span class="s2">&quot;J&quot;</span><span class="p">,</span> <span class="n">suit</span><span class="o">=</span><span class="s2">&quot;Diamonds&quot;</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">)</span>
<span class="n">jack_diamonds</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
<span class="n">ten_spades</span> <span class="o">=</span> <span class="n">PlayingCard</span><span class="p">(</span><span class="n">rank</span><span class="o">=</span><span class="s2">&quot;10&quot;</span><span class="p">,</span> <span class="n">suit</span><span class="o">=</span><span class="s2">&quot;Spades&quot;</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">)</span>
<span class="n">ten_spades</span><span class="o">.</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">(</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>

<span class="n">hand</span> <span class="o">=</span> <span class="n">Compound</span><span class="p">(</span>
    <span class="n">children</span><span class="o">=</span><span class="p">[</span>
        <span class="n">Rot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">Pos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">ace_spades</span><span class="p">,</span>
        <span class="n">Rot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">Pos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">king_hearts</span><span class="p">,</span>
        <span class="n">Rot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">Pos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">queen_clubs</span><span class="p">,</span>
        <span class="n">Rot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">*</span> <span class="n">Pos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="n">jack_diamonds</span><span class="p">,</span>
        <span class="n">Rot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="o">*</span> <span class="n">Pos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="n">ten_spades</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="n">show_object</span><span class="p">(</span><span class="n">Pos</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span> <span class="o">*</span> <span class="n">hand</span><span class="p">)</span>
<span class="n">show_object</span><span class="p">(</span><span class="n">box_builder</span><span class="o">.</span><span class="n">part</span><span class="p">,</span> <span class="s2">&quot;box_builder&quot;</span><span class="p">)</span>
<span class="n">show_object</span><span class="p">(</span>
    <span class="n">Pos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">wall</span> <span class="o">+</span> <span class="n">deck</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">lid_builder</span><span class="o">.</span><span class="n">part</span><span class="p">,</span>
    <span class="s2">&quot;lid_builder&quot;</span><span class="p">,</span>
    <span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</details></section>
<section id="stud-wall">
<span id="id10"></span><h2>Stud Wall<a class="headerlink" href="#stud-wall" title="Link to this heading"></a></h2>
<img alt="_images/stud_wall.png" class="align-center" src="_images/stud_wall.png" />
<p>This example demonstrates creatings custom <cite>Part</cite> objects and putting them into
assemblies. The custom object is a <cite>Stud</cite> used in the building industry while
the assembly is a <cite>StudWall</cite> created from copies of <cite>Stud</cite> objects for efficiency.
Both the <cite>Stud</cite> and <cite>StudWall</cite> objects use <cite>RigidJoints</cite> to define snap points which
are used to position all of objects.</p>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Stud</span><span class="p">(</span><span class="n">BasePartObject</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Part Object: Stud</span>

<span class="sd">    Create a dimensional framing stud.</span>

<span class="sd">    Args:</span>
<span class="sd">        length (float): stud size</span>
<span class="sd">        width (float): stud size</span>
<span class="sd">        thickness (float): stud size</span>
<span class="sd">        rotation (RotationLike, optional): angles to rotate about axes. Defaults to (0, 0, 0).</span>
<span class="sd">        align (Union[Align, tuple[Align, Align, Align]], optional): align min, center,</span>
<span class="sd">            or max of object. Defaults to (Align.CENTER, Align.CENTER, Align.MIN).</span>
<span class="sd">        mode (Mode, optional): combine mode. Defaults to Mode.ADD.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_applies_to</span> <span class="o">=</span> <span class="p">[</span><span class="n">BuildPart</span><span class="o">.</span><span class="n">_tag</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">length</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">FT</span><span class="p">,</span>
        <span class="n">width</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.5</span> <span class="o">*</span> <span class="n">IN</span><span class="p">,</span>
        <span class="n">thickness</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IN</span><span class="p">,</span>
        <span class="n">rotation</span><span class="p">:</span> <span class="n">RotationLike</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="n">align</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span> <span class="n">Align</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">Align</span><span class="p">,</span> <span class="n">Align</span><span class="p">,</span> <span class="n">Align</span><span class="p">]]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span>
            <span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span>
            <span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">mode</span><span class="p">:</span> <span class="n">Mode</span> <span class="o">=</span> <span class="n">Mode</span><span class="o">.</span><span class="n">ADD</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">length</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thickness</span> <span class="o">=</span> <span class="n">thickness</span>

        <span class="c1"># Create the basic shape</span>
        <span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">stud</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">():</span>
                <span class="n">RectangleRounded</span><span class="p">(</span><span class="n">thickness</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="mf">0.25</span> <span class="o">*</span> <span class="n">IN</span><span class="p">)</span>
            <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="n">length</span><span class="p">)</span>

        <span class="c1"># Create a Part object with appropriate alignment and rotation</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">part</span><span class="o">=</span><span class="n">stud</span><span class="o">.</span><span class="n">part</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="n">rotation</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">align</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">)</span>

        <span class="c1"># Add joints to the ends of the stud</span>
        <span class="n">RigidJoint</span><span class="p">(</span><span class="s2">&quot;end0&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">Location</span><span class="p">())</span>
        <span class="n">RigidJoint</span><span class="p">(</span><span class="s2">&quot;end1&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">Location</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">length</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">180</span><span class="p">))</span>


<span class="k">class</span><span class="w"> </span><span class="nc">StudWall</span><span class="p">(</span><span class="n">Compound</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;StudWall</span>

<span class="sd">    A simple stud wall assembly with top and sole plates.</span>

<span class="sd">    Args:</span>
<span class="sd">        length (float): wall length</span>
<span class="sd">        depth (float, optional): stud width. Defaults to 3.5*IN.</span>
<span class="sd">        height (float, optional): wall height. Defaults to 8*FT.</span>
<span class="sd">        stud_spacing (float, optional): center-to-center. Defaults to 16*IN.</span>
<span class="sd">        stud_thickness (float, optional): Defaults to 1.5*IN.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">length</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">depth</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.5</span> <span class="o">*</span> <span class="n">IN</span><span class="p">,</span>
        <span class="n">height</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">FT</span><span class="p">,</span>
        <span class="n">stud_spacing</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">16</span> <span class="o">*</span> <span class="n">IN</span><span class="p">,</span>
        <span class="n">stud_thickness</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">IN</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="c1"># Create the object that will be used for top and sole plates</span>
        <span class="n">plate</span> <span class="o">=</span> <span class="n">Stud</span><span class="p">(</span>
            <span class="n">length</span><span class="p">,</span>
            <span class="n">depth</span><span class="p">,</span>
            <span class="n">rotation</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">align</span><span class="o">=</span><span class="p">(</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span> <span class="n">Align</span><span class="o">.</span><span class="n">MAX</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="c1"># Define where studs will go on the plates</span>
        <span class="n">stud_locations</span> <span class="o">=</span> <span class="n">Pos</span><span class="p">(</span><span class="n">stud_thickness</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">stud_thickness</span><span class="p">)</span> <span class="o">*</span> <span class="n">GridLocations</span><span class="p">(</span>
            <span class="n">stud_spacing</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">length</span> <span class="o">/</span> <span class="n">stud_spacing</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="n">Align</span><span class="o">.</span><span class="n">MIN</span>
        <span class="p">)</span>
        <span class="n">stud_locations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Pos</span><span class="p">(</span><span class="n">length</span> <span class="o">-</span> <span class="n">stud_thickness</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">stud_thickness</span><span class="p">))</span>

        <span class="c1"># Create a single stud that will be copied for efficiency</span>
        <span class="n">stud</span> <span class="o">=</span> <span class="n">Stud</span><span class="p">(</span><span class="n">height</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">stud_thickness</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">stud_thickness</span><span class="p">)</span>

        <span class="c1"># For efficiency studs in the walls are copies with their own position</span>
        <span class="n">studs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">loc</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">stud_locations</span><span class="p">):</span>
            <span class="n">stud_joint</span> <span class="o">=</span> <span class="n">RigidJoint</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;stud</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">plate</span><span class="p">,</span> <span class="n">loc</span><span class="p">)</span>
            <span class="n">stud_copy</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">stud</span><span class="p">)</span>
            <span class="n">stud_joint</span><span class="o">.</span><span class="n">connect_to</span><span class="p">(</span><span class="n">stud_copy</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="s2">&quot;end0&quot;</span><span class="p">])</span>
            <span class="n">studs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stud_copy</span><span class="p">)</span>
        <span class="n">top_plate</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">plate</span><span class="p">)</span>
        <span class="n">sole_plate</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">plate</span><span class="p">)</span>

        <span class="c1"># Position the top plate relative to the top of the first stud</span>
        <span class="n">studs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="s2">&quot;end1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">connect_to</span><span class="p">(</span><span class="n">top_plate</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="s2">&quot;stud0&quot;</span><span class="p">])</span>

        <span class="c1"># Build the assembly of parts</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="p">[</span><span class="n">top_plate</span><span class="p">,</span> <span class="n">sole_plate</span><span class="p">]</span> <span class="o">+</span> <span class="n">studs</span><span class="p">)</span>

        <span class="c1"># Add joints to the wall</span>
        <span class="n">RigidJoint</span><span class="p">(</span><span class="s2">&quot;inside0&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">Location</span><span class="p">((</span><span class="n">depth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">depth</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">90</span><span class="p">))</span>
        <span class="n">RigidJoint</span><span class="p">(</span><span class="s2">&quot;end0&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">Location</span><span class="p">())</span>


<span class="n">x_wall</span> <span class="o">=</span> <span class="n">StudWall</span><span class="p">(</span><span class="mi">13</span> <span class="o">*</span> <span class="n">FT</span><span class="p">)</span>
<span class="n">y_wall</span> <span class="o">=</span> <span class="n">StudWall</span><span class="p">(</span><span class="mi">9</span> <span class="o">*</span> <span class="n">FT</span><span class="p">)</span>
<span class="n">x_wall</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="s2">&quot;inside0&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">connect_to</span><span class="p">(</span><span class="n">y_wall</span><span class="o">.</span><span class="n">joints</span><span class="p">[</span><span class="s2">&quot;end0&quot;</span><span class="p">])</span>

<span class="n">show</span><span class="p">(</span><span class="n">x_wall</span><span class="p">,</span> <span class="n">y_wall</span><span class="p">,</span> <span class="n">render_joints</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details></section>
<section id="tea-cup">
<span id="id11"></span><h2>Tea Cup<a class="headerlink" href="#tea-cup" title="Link to this heading"></a></h2>
<img alt="_images/tea_cup1.png" class="align-center" src="_images/tea_cup1.png" />
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show</span>

<span class="n">wall_thickness</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">MM</span>
<span class="n">fillet_radius</span> <span class="o">=</span> <span class="n">wall_thickness</span> <span class="o">*</span> <span class="mf">0.49</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">tea_cup</span><span class="p">:</span>
    <span class="c1"># Create the bowl of the cup as a revolved cross section</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">Plane</span><span class="o">.</span><span class="n">XZ</span><span class="p">)</span> <span class="k">as</span> <span class="n">bowl_section</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">BuildLine</span><span class="p">():</span>
            <span class="c1"># Start &amp; end points with control tangents</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">Spline</span><span class="p">(</span>
                <span class="p">(</span><span class="mi">30</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">MM</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">69</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">105</span> <span class="o">*</span> <span class="n">MM</span><span class="p">),</span>
                <span class="n">tangents</span><span class="o">=</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
                <span class="n">tangent_scalars</span><span class="o">=</span><span class="p">(</span><span class="mf">1.75</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="c1"># Lines to finish creating ½ the bowl shape</span>
            <span class="n">Polyline</span><span class="p">(</span><span class="n">s</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">s</span> <span class="o">@</span> <span class="mi">0</span> <span class="o">+</span> <span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span> <span class="o">*</span> <span class="n">MM</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">s</span> <span class="o">@</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Y</span><span class="p">),</span> <span class="n">s</span> <span class="o">@</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">make_face</span><span class="p">()</span>  <span class="c1"># Create a filled 2D shape</span>
    <span class="n">revolve</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">)</span>
    <span class="c1"># Hollow out the bowl with openings on the top and bottom</span>
    <span class="n">offset</span><span class="p">(</span><span class="n">amount</span><span class="o">=-</span><span class="n">wall_thickness</span><span class="p">,</span> <span class="n">openings</span><span class="o">=</span><span class="n">tea_cup</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">GeomType</span><span class="o">.</span><span class="n">PLANE</span><span class="p">))</span>
    <span class="c1"># Add a bottom to the bowl</span>
    <span class="k">with</span> <span class="n">Locations</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">s</span> <span class="o">@</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">Y</span><span class="p">)):</span>
        <span class="n">Cylinder</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="p">(</span><span class="n">s</span> <span class="o">@</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">wall_thickness</span><span class="p">)</span>
    <span class="c1"># Smooth out all the edges</span>
    <span class="n">fillet</span><span class="p">(</span><span class="n">tea_cup</span><span class="o">.</span><span class="n">edges</span><span class="p">(),</span> <span class="n">radius</span><span class="o">=</span><span class="n">fillet_radius</span><span class="p">)</span>

    <span class="c1"># Determine where the handle contacts the bowl</span>
    <span class="n">handle_intersections</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">tea_cup</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">find_intersection_points</span><span class="p">(</span>
            <span class="n">Axis</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertical_offset</span><span class="p">),</span> <span class="n">direction</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">vertical_offset</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">35</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">80</span> <span class="o">*</span> <span class="n">MM</span><span class="p">]</span>
    <span class="p">]</span>
    <span class="c1"># Create a path for handle creation</span>
    <span class="k">with</span> <span class="n">BuildLine</span><span class="p">(</span><span class="n">Plane</span><span class="o">.</span><span class="n">XZ</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle_path</span><span class="p">:</span>
        <span class="n">Spline</span><span class="p">(</span>
            <span class="n">handle_intersections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">wall_thickness</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">handle_intersections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mi">35</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">MM</span><span class="p">),</span>
            <span class="n">handle_intersections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mi">40</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">60</span> <span class="o">*</span> <span class="n">MM</span><span class="p">),</span>
            <span class="n">handle_intersections</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">wall_thickness</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="n">tangents</span><span class="o">=</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)),</span>
        <span class="p">)</span>
    <span class="c1"># Align the cross section to the beginning of the path</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="n">handle_path</span><span class="o">.</span><span class="n">line</span> <span class="o">^</span> <span class="mi">0</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle_cross_section</span><span class="p">:</span>
        <span class="n">RectangleRounded</span><span class="p">(</span><span class="n">wall_thickness</span><span class="p">,</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">fillet_radius</span><span class="p">)</span>
    <span class="n">sweep</span><span class="p">()</span>  <span class="c1"># Sweep handle cross section along path</span>

<span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">tea_cup</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">volume</span> <span class="o">-</span> <span class="mi">130326</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span>

<span class="n">show</span><span class="p">(</span><span class="n">tea_cup</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;tea cup&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show</span>

<span class="n">wall_thickness</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">MM</span>
<span class="n">fillet_radius</span> <span class="o">=</span> <span class="n">wall_thickness</span> <span class="o">*</span> <span class="mf">0.49</span>

<span class="c1"># Create the bowl of the cup as a revolved cross section</span>

<span class="c1"># Start &amp; end points with control tangents</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">Spline</span><span class="p">(</span>
    <span class="p">(</span><span class="mi">30</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">MM</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">69</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">105</span> <span class="o">*</span> <span class="n">MM</span><span class="p">),</span>
    <span class="n">tangents</span><span class="o">=</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.7</span><span class="p">,</span> <span class="mi">1</span><span class="p">)),</span>
    <span class="n">tangent_scalars</span><span class="o">=</span><span class="p">(</span><span class="mf">1.75</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="p">)</span>
<span class="c1"># Lines to finish creating ½ the bowl shape</span>
<span class="n">s</span> <span class="o">+=</span> <span class="n">Polyline</span><span class="p">(</span><span class="n">s</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">s</span> <span class="o">@</span> <span class="mi">0</span> <span class="o">+</span> <span class="p">(</span><span class="mi">10</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span> <span class="o">*</span> <span class="n">MM</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">s</span> <span class="o">@</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Y</span><span class="p">),</span> <span class="n">s</span> <span class="o">@</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">bowl_section</span> <span class="o">=</span> <span class="n">Plane</span><span class="o">.</span><span class="n">XZ</span> <span class="o">*</span> <span class="n">make_face</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>  <span class="c1"># Create a filled 2D shape</span>
<span class="n">tea_cup</span> <span class="o">=</span> <span class="n">revolve</span><span class="p">(</span><span class="n">bowl_section</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">)</span>

<span class="c1"># Hollow out the bowl with openings on the top and bottom</span>
<span class="n">tea_cup</span> <span class="o">=</span> <span class="n">offset</span><span class="p">(</span>
    <span class="n">tea_cup</span><span class="p">,</span> <span class="o">-</span><span class="n">wall_thickness</span><span class="p">,</span> <span class="n">openings</span><span class="o">=</span><span class="n">tea_cup</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">GeomType</span><span class="o">.</span><span class="n">PLANE</span><span class="p">)</span>
<span class="p">)</span>

<span class="c1"># Add a bottom to the bowl</span>
<span class="n">tea_cup</span> <span class="o">+=</span> <span class="n">Pos</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">s</span> <span class="o">@</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span> <span class="o">*</span> <span class="n">Cylinder</span><span class="p">(</span><span class="n">radius</span><span class="o">=</span><span class="p">(</span><span class="n">s</span> <span class="o">@</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">X</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">wall_thickness</span><span class="p">)</span>

<span class="c1"># Smooth out all the edges</span>
<span class="n">tea_cup</span> <span class="o">=</span> <span class="n">fillet</span><span class="p">(</span><span class="n">tea_cup</span><span class="o">.</span><span class="n">edges</span><span class="p">(),</span> <span class="n">radius</span><span class="o">=</span><span class="n">fillet_radius</span><span class="p">)</span>

<span class="c1"># Determine where the handle contacts the bowl</span>
<span class="n">handle_intersections</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">tea_cup</span><span class="o">.</span><span class="n">find_intersection_points</span><span class="p">(</span>
        <span class="n">Axis</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">vertical_offset</span><span class="p">),</span> <span class="n">direction</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">vertical_offset</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">35</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">80</span> <span class="o">*</span> <span class="n">MM</span><span class="p">]</span>
<span class="p">]</span>

<span class="c1"># Create a path for handle creation</span>
<span class="n">path_spline</span> <span class="o">=</span> <span class="n">Spline</span><span class="p">(</span>
    <span class="n">handle_intersections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">wall_thickness</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">handle_intersections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mi">35</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span> <span class="o">*</span> <span class="n">MM</span><span class="p">),</span>
    <span class="n">handle_intersections</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mi">40</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">60</span> <span class="o">*</span> <span class="n">MM</span><span class="p">),</span>
    <span class="n">handle_intersections</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="n">wall_thickness</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="n">tangents</span><span class="o">=</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.25</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)),</span>
<span class="p">)</span>

<span class="c1"># Align the cross section to the beginning of the path</span>
<span class="n">location</span> <span class="o">=</span> <span class="n">path_spline</span> <span class="o">^</span> <span class="mi">0</span>
<span class="n">handle_cross_section</span> <span class="o">=</span> <span class="n">location</span> <span class="o">*</span> <span class="n">RectangleRounded</span><span class="p">(</span><span class="n">wall_thickness</span><span class="p">,</span> <span class="mi">8</span> <span class="o">*</span> <span class="n">MM</span><span class="p">,</span> <span class="n">fillet_radius</span><span class="p">)</span>

<span class="c1"># Sweep handle cross section along path</span>
<span class="n">tea_cup</span> <span class="o">+=</span> <span class="n">sweep</span><span class="p">(</span><span class="n">handle_cross_section</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path_spline</span><span class="p">)</span>

<span class="c1"># assert abs(tea_cup.part.volume - 130326.77052487945) &lt; 1e-3</span>

<span class="n">show</span><span class="p">(</span><span class="n">tea_cup</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;tea cup&quot;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</details><p>This example demonstrates the creation a tea cup, which serves as an example of
constructing complex, non-flat geometrical shapes programmatically.</p>
<p>The tea cup model involves several CAD techniques, such as:</p>
<ul class="simple">
<li><p>Revolve Operations: There is 1 occurrence of a revolve operation. This is used
to create the main body of the tea cup by revolving a profile around an axis,
a common technique for generating symmetrical objects like cups.</p></li>
<li><p>Sweep Operations: There are 2 occurrences of sweep operations. The handle are
created by sweeping a profile along a path to generate non-planar surfaces.</p></li>
<li><p>Offset/Shell Operations: the bowl of the cup is hollowed out with the offset
operation leaving the top open.</p></li>
<li><p>Fillet Operations: There is 1 occurrence of a fillet operation which is used to
round the edges for aesthetic improvement and to mimic real-world objects more
closely.</p></li>
</ul>
</section>
<section id="vase">
<span id="id12"></span><h2>Vase<a class="headerlink" href="#vase" title="Link to this heading"></a></h2>
<img alt="_images/vase.png" class="align-center" src="_images/vase.png" />
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">🔨 Reference Implementation (Builder Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show_object</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">vase</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">profile</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">BuildLine</span><span class="p">()</span> <span class="k">as</span> <span class="n">outline</span><span class="p">:</span>
            <span class="n">l1</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
            <span class="n">l2</span> <span class="o">=</span> <span class="n">RadiusArc</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="mi">50</span><span class="p">)</span>
            <span class="n">l3</span> <span class="o">=</span> <span class="n">Spline</span><span class="p">(</span><span class="n">l2</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">tangents</span><span class="o">=</span><span class="p">(</span><span class="n">l2</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.75</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span>
            <span class="n">l4</span> <span class="o">=</span> <span class="n">RadiusArc</span><span class="p">(</span><span class="n">l3</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l3</span> <span class="o">@</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
            <span class="n">l5</span> <span class="o">=</span> <span class="n">Spline</span><span class="p">(</span>
                <span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">),</span>
                <span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
                <span class="n">tangents</span><span class="o">=</span><span class="p">(</span><span class="n">l4</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
            <span class="p">)</span>
            <span class="n">Polyline</span><span class="p">(</span>
                <span class="n">l5</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">l5</span> <span class="o">@</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">l5</span> <span class="o">@</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
                <span class="n">l1</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">make_face</span><span class="p">()</span>
    <span class="n">revolve</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
    <span class="n">offset</span><span class="p">(</span><span class="n">openings</span><span class="o">=</span><span class="n">vase</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">amount</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">top_edges</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">vase</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by_position</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">62</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">GeomType</span><span class="o">.</span><span class="n">CIRCLE</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">fillet</span><span class="p">(</span><span class="n">top_edges</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="n">fillet</span><span class="p">(</span><span class="n">vase</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>


<span class="n">show_object</span><span class="p">(</span><span class="n">Rot</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">vase</span><span class="o">.</span><span class="n">part</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;vase&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">✏️ Reference Implementation (Algebra Mode)</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>
<span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">ocp_vscode</span><span class="w"> </span><span class="kn">import</span> <span class="n">show_object</span>

<span class="n">l1</span> <span class="o">=</span> <span class="n">Line</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">l2</span> <span class="o">=</span> <span class="n">RadiusArc</span><span class="p">(</span><span class="n">l1</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="mi">50</span><span class="p">)</span>
<span class="n">l3</span> <span class="o">=</span> <span class="n">Spline</span><span class="p">(</span><span class="n">l2</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">22</span><span class="p">,</span> <span class="mi">40</span><span class="p">),</span> <span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">50</span><span class="p">),</span> <span class="n">tangents</span><span class="o">=</span><span class="p">(</span><span class="n">l2</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mf">0.75</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span>
<span class="n">l4</span> <span class="o">=</span> <span class="n">RadiusArc</span><span class="p">(</span><span class="n">l3</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l3</span> <span class="o">@</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">l5</span> <span class="o">=</span> <span class="n">Spline</span><span class="p">(</span>
    <span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="mf">2.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">),</span>
    <span class="n">l4</span> <span class="o">@</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
    <span class="n">tangents</span><span class="o">=</span><span class="p">(</span><span class="n">l4</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span>
<span class="p">)</span>
<span class="n">outline</span> <span class="o">=</span> <span class="n">l1</span> <span class="o">+</span> <span class="n">l2</span> <span class="o">+</span> <span class="n">l3</span> <span class="o">+</span> <span class="n">l4</span> <span class="o">+</span> <span class="n">l5</span>
<span class="n">outline</span> <span class="o">+=</span> <span class="n">Polyline</span><span class="p">(</span>
    <span class="n">l5</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">l5</span> <span class="o">@</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">Vector</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">l5</span> <span class="o">@</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">Y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">l1</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">profile</span> <span class="o">=</span> <span class="n">make_face</span><span class="p">(</span><span class="n">outline</span><span class="o">.</span><span class="n">edges</span><span class="p">())</span>
<span class="n">vase</span> <span class="o">=</span> <span class="n">revolve</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
<span class="n">vase</span> <span class="o">=</span> <span class="n">offset</span><span class="p">(</span><span class="n">vase</span><span class="p">,</span> <span class="n">openings</span><span class="o">=</span><span class="n">vase</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span><span class="o">.</span><span class="n">last</span><span class="p">,</span> <span class="n">amount</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>

<span class="n">top_edges</span> <span class="o">=</span> <span class="n">vase</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">GeomType</span><span class="o">.</span><span class="n">CIRCLE</span><span class="p">)</span><span class="o">.</span><span class="n">filter_by_position</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">62</span><span class="p">)</span>
<span class="n">vase</span> <span class="o">=</span> <span class="n">fillet</span><span class="p">(</span><span class="n">top_edges</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>

<span class="n">vase</span> <span class="o">=</span> <span class="n">fillet</span><span class="p">(</span><span class="n">vase</span><span class="o">.</span><span class="n">edges</span><span class="p">()</span><span class="o">.</span><span class="n">sort_by</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="n">show_object</span><span class="p">(</span><span class="n">Rot</span><span class="p">(</span><span class="mi">90</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="n">vase</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;vase&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</details><p>This example demonstrates the build123d techniques involving the creation of a vase.
Specifically, it showcases the processes of revolving a sketch, shelling
(creating a hollow object by removing material from its interior), and
selecting edges by position range and type for the application of fillets
(rounding off the edges).</p>
<ul class="simple">
<li><p>Sketching: Drawing a 2D profile or outline that represents the side view of
the vase.</p></li>
<li><p>Revolving: Rotating the sketch around an axis to create a 3D object. This
step transforms the 2D profile into a 3D vase shape.</p></li>
<li><p>Offset/Shelling: Removing material from the interior of the solid vase to
create a hollow space, making it resemble a real vase more closely.</p></li>
<li><p>Edge Filleting: Selecting specific edges of the vase for filleting, which
involves rounding those edges. The edges are selected based on their position
and type.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tutorial_joints.html" class="btn btn-neutral float-left" title="Joint Tutorial" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tttt.html" class="btn btn-neutral float-right" title="Too Tall Toby (TTT) Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Gumyr.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>