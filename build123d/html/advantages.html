

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Standard Python Context Manager &mdash; build123d 0.9.2.dev40+gb1f0eed documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster.custom.css?v=7bc2f056" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster.bundle.min.css?v=37217874" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-shadow.min.css?v=6227e517" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-punk.min.css?v=94669e23" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-noir.min.css?v=21a39f42" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-light.min.css?v=a18b2449" />
      <link rel="stylesheet" type="text/css" href="_static/css/tooltipster-sideTip-borderless.min.css?v=dbff53e4" />
      <link rel="stylesheet" type="text/css" href="_static/css/micromodal.css?v=d7bf34ee" />
      <link rel="stylesheet" type="text/css" href="_static/css/sphinx_rtd_theme.css?v=3234e928" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=c97902b4"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
      <script src="_static/js/hoverxref.js?v=6ff7264e"></script>
      <script src="_static/js/tooltipster.bundle.min.js?v=18bf091b"></script>
      <script src="_static/js/micromodal.min.js?v=04d6302d"></script>
      <script src="_static/design-tabs.js?v=f930bc37"></script>
      <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            build123d
              <img src="_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_concepts.html">Key Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_concepts_builder.html">Key Concepts (builder mode)</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_concepts_algebra.html">Key Concepts (algebra mode)</a></li>
<li class="toctree-l1"><a class="reference internal" href="moving_objects.html">Moving Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="OpenSCAD.html">Transitioning from OpenSCAD</a></li>
<li class="toctree-l1"><a class="reference internal" href="introductory_examples.html">Introductory Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="objects.html">Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="selectors_operators.html">Selectors and Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="operations.html">Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="builders.html">Builders</a></li>
<li class="toctree-l1"><a class="reference internal" href="joints.html">Joints</a></li>
<li class="toctree-l1"><a class="reference internal" href="assemblies.html">Assemblies</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips.html">Tips, Best Practices and FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="import_export.html">Import/Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheat_sheet.html">Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="external.html">External Tools and Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="builder_api_reference.html">Builder Common API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="direct_api_reference.html">Direct API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">build123d</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Standard Python Context Manager</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/advantages.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <p>As mentioned previously, the most significant advantage is that build123d is more pythonic.
Specifically:</p>
<section id="standard-python-context-manager">
<h1>Standard Python Context Manager<a class="headerlink" href="#standard-python-context-manager" title="Link to this heading"></a></h1>
<p>The creation of standard instance variables, looping and other normal python operations
is enabled by the replacement of method chaining (fluent programming) with a standard
python context manager.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># CadQuery Fluent API</span>
<span class="n">pillow_block</span> <span class="o">=</span> <span class="p">(</span><span class="n">cq</span><span class="o">.</span><span class="n">Workplane</span><span class="p">(</span><span class="s2">&quot;XY&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">box</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">thickness</span><span class="p">)</span>
    <span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="s2">&quot;|Z&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">fillet</span><span class="p">(</span><span class="n">fillet</span><span class="p">)</span>
    <span class="o">.</span><span class="n">faces</span><span class="p">(</span><span class="s2">&quot;&gt;Z&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">workplane</span><span class="p">()</span>
    <span class="o">...</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># build123d API</span>
<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">pillow_block</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">plan</span><span class="p">:</span>
        <span class="n">Rectangle</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
        <span class="n">fillet</span><span class="p">(</span><span class="n">plan</span><span class="o">.</span><span class="n">vertices</span><span class="p">(),</span> <span class="n">radius</span><span class="o">=</span><span class="n">fillet</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">thickness</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>The use of the standard <cite>with</cite> block allows standard python instructions to be
inserted anyway in the code flow.  One can insert a CQ-editor <cite>debug</cite> or standard <cite>print</cite>
statement anywhere in the code without impacting functionality. Simple python
<cite>for</cite> loops can be used to repetitively create objects instead of forcing users
into using more complex <cite>lambda</cite> and <cite>iter</cite> operations.</p>
</section>
<section id="instantiated-objects">
<h1>Instantiated Objects<a class="headerlink" href="#instantiated-objects" title="Link to this heading"></a></h1>
<p>Each object and operation is now a class instantiation that interacts with the
active context implicitly for the user. These instantiations can be assigned to
an instance variable as with standard python programming for direct use.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">BuildSketch</span><span class="p">()</span> <span class="k">as</span> <span class="n">plan</span><span class="p">:</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">Rectangle</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">area</span><span class="p">)</span>
    <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="operators">
<h1>Operators<a class="headerlink" href="#operators" title="Link to this heading"></a></h1>
<p>New operators have been created to extract information from objects created previously
in the code. The <cite>&#64;</cite> operator extracts the position along an Edge or Wire while the
<cite>%</cite> operator extracts the tangent along an Edge or Wire. The position parameter are float
values between 0.0 and 1.0 which represent the beginning and end of the line. In the following
example, a spline is created from the end of l5 (<cite>l5 &#64; 1</cite>) to the beginning of l6 (<cite>l6 &#64; 0</cite>)
with tangents equal to the tangents of l5 and l6 at their end and beginning respectively.
Being able to extract information from existing features allows the user to “snap” new
features to these points without knowing their numeric values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">BuildLine</span><span class="p">()</span> <span class="k">as</span> <span class="n">outline</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="n">l5</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">l6</span> <span class="o">=</span> <span class="n">Polyline</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">Spline</span><span class="p">(</span><span class="n">l5</span> <span class="o">@</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l6</span> <span class="o">@</span> <span class="mi">0</span><span class="p">,</span> <span class="n">tangents</span><span class="o">=</span><span class="p">(</span><span class="n">l5</span> <span class="o">%</span> <span class="mi">1</span><span class="p">,</span> <span class="n">l6</span> <span class="o">%</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="last-operation-objects">
<h1>Last Operation Objects<a class="headerlink" href="#last-operation-objects" title="Link to this heading"></a></h1>
<p>All of the <cite>vertices()</cite>, <cite>edges()</cite>, <cite>faces()</cite>, and <cite>solids()</cite> methods of the builders
can either return all of the objects requested or just the objects changed during the
last operation. This allows the user to easily access features for further refinement,
as shown in the following code where the final line selects the edges that were added
by the last operation and fillets them. Such a selection would be quite difficult
otherwise.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">build123d</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>

<span class="k">with</span> <span class="n">BuildPart</span><span class="p">()</span> <span class="k">as</span> <span class="n">pipes</span><span class="p">:</span>
    <span class="n">box</span> <span class="o">=</span> <span class="n">Box</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="o">*</span><span class="n">box</span><span class="o">.</span><span class="n">faces</span><span class="p">())</span> <span class="k">as</span> <span class="n">pipe</span><span class="p">:</span>
        <span class="n">Circle</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=-</span><span class="mi">5</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">BuildSketch</span><span class="p">(</span><span class="o">*</span><span class="n">box</span><span class="o">.</span><span class="n">faces</span><span class="p">())</span> <span class="k">as</span> <span class="n">pipe</span><span class="p">:</span>
        <span class="n">Circle</span><span class="p">(</span><span class="mf">4.5</span><span class="p">)</span>
        <span class="n">Circle</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="n">Mode</span><span class="o">.</span><span class="n">SUBTRACT</span><span class="p">)</span>
    <span class="n">extrude</span><span class="p">(</span><span class="n">amount</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">fillet</span><span class="p">(</span><span class="n">pipes</span><span class="o">.</span><span class="n">edges</span><span class="p">(</span><span class="n">Select</span><span class="o">.</span><span class="n">LAST</span><span class="p">),</span> <span class="mf">0.2</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="extensions">
<h1>Extensions<a class="headerlink" href="#extensions" title="Link to this heading"></a></h1>
<p>Extending build123d is relatively simple in that custom objects or operations
can be created as new classes without the need to monkey patch any of the
core functionality. These new classes will be seen in IDEs which is not
possible with monkey patching the core CadQuery classes.</p>
</section>
<section id="enums">
<h1>Enums<a class="headerlink" href="#enums" title="Link to this heading"></a></h1>
<p>All <cite>Literal</cite> strings have been replaced with <cite>Enum</cite> which allows IDEs to
prompt users for valid options without having to refer to documentation.</p>
</section>
<section id="selectors-replaced-by-lists">
<h1>Selectors replaced by Lists<a class="headerlink" href="#selectors-replaced-by-lists" title="Link to this heading"></a></h1>
<p>String based selectors have been replaced with standard python filters and
sorting which opens up the full functionality of python lists. To aid the
user, common operations have been optimized as shown here along with
a fully custom selection:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">top</span> <span class="o">=</span> <span class="n">rail</span><span class="o">.</span><span class="n">faces</span><span class="p">()</span><span class="o">.</span><span class="n">filter_by_normal</span><span class="p">(</span><span class="n">Axis</span><span class="o">.</span><span class="n">Z</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="o">...</span>
<span class="n">outside_vertices</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span>
    <span class="k">lambda</span> <span class="n">v</span><span class="p">:</span> <span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">Y</span> <span class="o">==</span> <span class="mf">0.0</span> <span class="ow">or</span> <span class="n">v</span><span class="o">.</span><span class="n">Y</span> <span class="o">==</span> <span class="n">height</span><span class="p">)</span> <span class="ow">and</span> <span class="o">-</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">&lt;</span> <span class="n">v</span><span class="o">.</span><span class="n">X</span> <span class="o">&lt;</span> <span class="n">width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">din</span><span class="o">.</span><span class="n">vertices</span><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Gumyr.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>